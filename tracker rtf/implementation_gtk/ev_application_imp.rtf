{\rtf1\ansi\ansicpg1252\deflang1033{\fonttbl{\f0\fscript\fcharset0 Courier;}}{\colortbl ;\red0\green0\blue0;\red255\green255\blue255;\red128\green0\blue0;\red0\green0\blue255;\red0\green128\blue0;\red0\green0\blue128;}
{\cf3\f0\fs16 {\tab}{\tab}{\tab}-- Automatic generation produced by ISE Eiffel --
{\line}
{{\b\cf6 note}{\line}
{\tab}{\cf1 description}{\cf1 :} "EiffelVision application, GTK+ implementation."{\line}
{\tab}{\cf1 legal}{\cf1 :} "See notice at end of class."{\line}
{\tab}{\cf1 status}{\cf1 :} "See notice at end of class."{\line}
{\tab}{\cf1 keywords}{\cf1 :} "application"{\line}
{\tab}{\cf1 date}{\cf1 :} "$Date: 2016-09-27 08:50:48 -0700 (Tue, 27 Sep 2016) $"{\line}
{\tab}{\cf1 revision}{\cf1 :} "$Revision: 99192 $"{\line}
{\line}
{\b\cf6 class} {\line}
{\tab}{\cf4 EV_APPLICATION_IMP}{\line}
{\line}
{\b\cf6 inherit}{\line}
{\tab}{\cf4 EV_APPLICATION_I}{\line}
{\tab}{\tab}{\b\cf6 export}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 EV_ANY_I}{\cf1 ,} {\cf4 EV_INTERMEDIARY_ROUTINES}{\cf1 \}} {\cf5 pointer_motion_actions_internal}{\cf1 ,} {\cf5 pointer_button_press_actions_internal}{\cf1 ,} {\cf5 pointer_double_press_actions_internal}{\cf1 ,} {\cf5 pointer_button_release_actions_internal}{\cf1 ,} {\cf5 is_destroyed}{\line}
{\tab}{\tab}{\b\cf6 undefine}{\line}
{\tab}{\tab}{\tab}{\cf5 dispose}{\line}
{\tab}{\tab}{\b\cf6 redefine}{\line}
{\tab}{\tab}{\tab}{\cf5 call_post_launch_actions}{\cf1 ,}{\line}
{\tab}{\tab}{\tab}{\cf5 focused_widget}{\cf1 ,}{\line}
{\tab}{\tab}{\tab}{\cf5 make}{\line}
{\tab}{\tab}{\b\cf6 end}{\line}
{\line}
{\tab}{\cf4 EV_GTK_DEPENDENT_APPLICATION_IMP}{\line}
{\tab}{\tab}{\b\cf6 rename}{\line}
{\tab}{\tab}{\tab}{\cf5 sleep} {\b\cf6 as} {\cf5 nano_sleep}{\line}
{\tab}{\tab}{\b\cf6 end}{\line}
{\line}
{\tab}{\cf4 EV_GTK_EVENT_STRINGS}{\line}
{\line}
{\tab}{\cf4 RT_DEBUGGER}{\line}
{\line}
{\b\cf6 create} {\line}
{\tab}{\cf5 make}{\line}
{\line}
{\b\cf6 feature} {\cf1 \{}NONE{\cf1 \}} {\cf3 --}{\cf3  Initialization}{\line}
{\line}
{\tab}{\cf5 {\cf5 make}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set up the callback marshal and initialize GTK+.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 locale_str}{\cf1 :} {\cf4 STRING_8}{\line}
{\tab}{\tab}{\tab}{\cf5 l_colormap}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_gdk_screen_get_rgba_colormap_symbol}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 character_string_buffer}{\b\cf1 .}{\cf5 make}{\cf1  }{\cf1 (}4{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 locale_str}{\b\cf1 .}{\cf5 make_from_c}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_set_locale}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 gtk_is_launchable} {\cf1 :=} {\cf5 gtk_init_check}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 stored_display_data}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 gtk_marshal}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 window_oids}{\b\cf1 .}{\cf5 make}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 default_font_name_internal}{\b\cf1 .}{\cf5 make_empty}{\line}
{\tab}{\tab}{\tab}{\cf1 Precursor}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 gtk_is_launchable} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 initialize_threading}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 saved_debug_state} {\cf1 :=} {\cf5 debug_state}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 enable_ev_gtk_log}{\cf1  }{\cf1 (}0{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_set_show_events} {\cf1 (}{\b\cf6 False}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 best_available_color_depth} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_visual_get_best_depth}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}24{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_gdk_screen_get_rgba_colormap_symbol} {\cf1 :=} {\cf5 Gdk_screen_get_rgba_colormap_symbol}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_gdk_screen_get_rgba_colormap_symbol} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_colormap} {\cf1 =} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_colormap} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_rgb_colormap} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_default}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_widget_set_default_colormap} {\cf1 (}{\cf5 l_colormap}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 gtk_dependent_initialize}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 tooltips} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_tooltips_new}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 object_ref} {\cf1 (}{\cf5 tooltips}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_object_sink} {\cf1 (}{\cf5 tooltips}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 set_tooltip_delay}{\cf1  }{\cf1 (}500{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_error_trap_push}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 update_screen_meta_data}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 default_input_context} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_im_context_simple_new}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 gtk_marshal}{\b\cf1 .}{\cf5 signal_connect}{\cf1  }{\cf1 (}{\cf5 default_input_context}{\cf1 ,} {\b\cf6 create} {\cf1 \{}{\cf4 EV_GTK_C_STRING}{\cf1 \}}{\b\cf1 .}{\cf5 set_with_eiffel_string}{\cf1  }{\cf1 (}"commit"{\cf1 )}{\cf1 ,} {\b\cf6 agent} {\cf5 on_char}{\cf1 ,} {\cf5 Im_context_commit_translate_agent}{\cf1 ,} {\b\cf6 True}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"EiffelVision application could not launch, check DISPLAY environment variable%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 die}{\cf1  }{\cf1 (}0{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 on_char} {\cf1 (}{\cf5 a_gtk_c_string}{\cf1 :} {\cf4 EV_GTK_C_STRING}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Update }{\cf5 character_string_buffer}{\cf3  Unicode key string.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 character_string_buffer}{\b\cf1 .}{\cf5 wipe_out}{\line}
{\tab}{\tab}{\tab}{\cf5 character_string_buffer}{\b\cf1 .}{\cf5 append}{\cf1  }{\cf1 (}{\cf5 a_gtk_c_string}{\b\cf1 .}{\cf5 string}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_im_context_reset} {\cf1 (}{\cf5 default_input_context}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 update_screen_meta_data}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Update the default screen meta data.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_rect}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_primary_monitor_number}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf5 l_image}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_supports_composite_symbol}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 l_image} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_image_new} {\cf1 (}1{\cf1 ,} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_rgb_visual} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_default}{\cf1 )}{\cf1 ,} 1{\cf1 ,} 1{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 is_display_remote} {\cf1 :=} {\cf5 l_image} {\cf1 =} {\cf5 default_pointer}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 not} {\cf5 is_display_remote} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 object_unref} {\cf1 (}{\cf5 l_image}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf5 l_supports_composite_symbol} {\cf1 :=} {\cf5 Gdk_display_supports_composite_symbol}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_supports_composite_symbol} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 is_display_alpha_capable} {\cf1 :=} {\cf5 gdk_display_supports_composite_call}{\cf1  }{\cf1 (}{\cf5 l_supports_composite_symbol}{\cf1 ,} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_display_get_default}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf5 screen_monitor_count} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_n_monitors} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_default}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 l_rect} {\cf1 :=} {\cf5 Reusable_rectangle_struct}{\line}
{\tab}{\tab}{\tab}{\cf5 l_primary_monitor_number} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_primary_monitor} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_default}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_monitor_geometry} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_default}{\cf1 ,} {\cf5 l_primary_monitor_number}{\cf1 ,} {\cf5 l_rect}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 screen_primary_monitor_number} {\cf1 :=} {\cf5 l_primary_monitor_number} {\cf1 +} 1{\line}
{\tab}{\tab}{\tab}{\cf5 screen_virtual_x} {\cf1 :=} {\cf1 -} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_rectangle_struct_x} {\cf1 (}{\cf5 l_rect}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 screen_virtual_y} {\cf1 :=} {\cf1 -} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_rectangle_struct_y} {\cf1 (}{\cf5 l_rect}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 screen_width} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_rectangle_struct_width} {\cf1 (}{\cf5 l_rect}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 screen_height} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_rectangle_struct_height} {\cf1 (}{\cf5 l_rect}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 screen_virtual_width} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_width}{\line}
{\tab}{\tab}{\tab}{\cf5 screen_virtual_height} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_height}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_display_supports_composite_symbol}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Symbol for }{\cf5 gdk_display_supports_composite}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 symbol_from_symbol_name}{\cf1  }{\cf1 (}"gdk_display_supports_composite"{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 gdk_display_supports_composite_call} {\cf1 (}{\cf5 a_function}{\cf1 :} {\cf4 POINTER}{\cf1 ;} {\cf5 a_display}{\cf1 :} {\cf4 POINTER}{\cf1 )}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\b\cf6 external}{\line}
{\tab}{\tab}{\tab}"C inline use <ev_gtk.h>"{\line}
{\tab}{\tab}{\b\cf6 alias}{\line}
{\tab}{\tab}{\tab}"return (FUNCTION_CAST(gboolean, (GdkDisplay*)) $a_function)((GdkDisplay*) $a_display);"{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_screen_get_rgba_colormap_symbol}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Symbol for }{\cf5 gdk_display_supports_composite}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 symbol_from_symbol_name}{\cf1  }{\cf1 (}"gdk_screen_get_rgba_colormap"{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 gdk_screen_get_rgba_colormap_call} {\cf1 (}{\cf5 a_function}{\cf1 :} {\cf4 POINTER}{\cf1 ;} {\cf5 a_display}{\cf1 :} {\cf4 POINTER}{\cf1 )}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 external}{\line}
{\tab}{\tab}{\tab}"C inline use <ev_gtk.h>"{\line}
{\tab}{\tab}{\b\cf6 alias}{\line}
{\tab}{\tab}{\tab}"return (FUNCTION_CAST(GdkColormap*, (GdkScreen*)) $a_function)((GdkScreen*) $a_display);"{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}{\cf4 EV_ANY_I}{\cf1 \}} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 screen_virtual_x}{\cf1 :} {\cf4 INTEGER_32}}{\line}
{\line}
{\tab}{\cf5 {\cf5 screen_virtual_y}{\cf1 :} {\cf4 INTEGER_32}}{\line}
{\line}
{\tab}{\cf5 {\cf5 screen_virtual_width}{\cf1 :} {\cf4 INTEGER_32}}{\line}
{\line}
{\tab}{\cf5 {\cf5 screen_virtual_height}{\cf1 :} {\cf4 INTEGER_32}}{\line}
{\line}
{\tab}{\cf5 {\cf5 screen_width}{\cf1 :} {\cf4 INTEGER_32}}{\line}
{\line}
{\tab}{\cf5 {\cf5 screen_height}{\cf1 :} {\cf4 INTEGER_32}}{\line}
{\line}
{\tab}{\cf5 {\cf5 screen_monitor_count}{\cf1 :} {\cf4 INTEGER_32}}{\line}
{\line}
{\tab}{\cf5 {\cf5 screen_primary_monitor_number}{\cf1 :} {\cf4 INTEGER_32}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Screen meta data.}{\line}
{\line}
{\tab}{\cf5 {\cf5 best_available_color_depth}{\cf1 :} {\cf4 INTEGER_32}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Best available color depth of display}{\line}
{\line}
{\tab}{\cf5 {\cf5 is_display_alpha_capable}{\cf1 :} {\cf4 BOOLEAN}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Is application display capable of displaying transparent windows?}{\line}
{\line}
{\tab}{\cf5 {\cf5 is_display_remote}{\cf1 :} {\cf4 BOOLEAN}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Is application display remote?}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  This function is primarily to determine if drawing to the display is optimal.}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_currently_shown_control} {\cf1 (}{\cf5 a_control}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_PICK_AND_DROPABLE}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set }{\cf5 currently_shown_control}{\cf3  to }{\cf5 a_control}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 currently_shown_control} {\cf1 :=} {\cf5 a_control}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 currently_shown_control}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_PICK_AND_DROPABLE}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Graphical objects that is presently shown}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Used for holding a reference do not get garbage collected.}{\line}
{\line}
{\tab}{\cf5 {\cf5 focused_widget}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_WIDGET}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Widget with keyboard focus}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 current_windows}{\cf1 :} {\b\cf6 like} {\cf5 windows}{\line}
{\tab}{\tab}{\tab}{\cf5 current_window}{\cf1 :} {\cf4 EV_WINDOW}{\line}
{\tab}{\tab}{\tab}{\cf5 l_window_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_WINDOW_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_widget_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_WIDGET_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_widget_ptr}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 current_windows} {\cf1 :=} {\cf5 windows}{\line}
{\tab}{\tab}{\tab}{\b\cf6 from}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 current_windows}{\b\cf1 .}{\cf5 start}{\line}
{\tab}{\tab}{\tab}{\b\cf6 until}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 current_windows}{\b\cf1 .}{\cf5 off} {\b\cf6 or} {\b\cf6 Result} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\b\cf6 loop}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 current_window} {\cf1 :=} {\cf5 current_windows}{\b\cf1 .}{\cf5 item}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 current_window}{\b\cf1 .}{\cf5 has_focus} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 current_window}{\b\cf1 .}{\cf5 full} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_window_imp} {\cf1 ?=} {\cf5 current_window}{\b\cf1 .}{\cf5 implementation}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 check}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_window_imp} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_ptr} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_window_struct_focus_widget} {\cf1 (}{\cf5 l_window_imp}{\b\cf1 .}{\cf5 c_object}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_widget_ptr} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 l_widget_ptr}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_widget_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 l_widget_imp}{\b\cf1 .}{\cf5 interface}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 current_window}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 current_windows}{\b\cf1 .}{\cf5 forth}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 wait_for_input} {\cf1 (}{\cf5 msec}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Wait for at most }{\cf5 msec}{\cf3  milliseconds for an event.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 sleep}{\cf1  }{\cf1 (}{\cf5 msec}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 process_underlying_toolkit_event_queue}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Process all pending GDK events and then dispatch GTK iteration until no more}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  events are pending.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 gdk_event}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 event_widget}{\cf1 ,} {\cf5 l_grab_widget}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_call_event}{\cf1 ,} {\cf5 l_propagate_event}{\cf1 ,} {\cf5 l_event_handled}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf5 l_pnd_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_PICK_AND_DROPABLE_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_widget_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_WIDGET_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_WINDOW_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_gtk_widget_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_GTK_WIDGET_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_gtk_window_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_GTK_WINDOW_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_gdk_window}{\cf1 ,} {\cf5 l_gtk_widget_ptr}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_motion_tuple}{\cf1 :} {\b\cf6 like} {\cf5 Motion_tuple}{\line}
{\tab}{\tab}{\tab}{\cf5 l_app_motion_tuple}{\cf1 :} {\b\cf6 like} {\cf5 App_motion_tuple}{\line}
{\tab}{\tab}{\tab}{\cf5 l_no_more_events}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf5 i}{\cf1 ,} {\cf5 l_widget_x}{\cf1 ,} {\cf5 l_widget_y}{\cf1 ,} {\cf5 l_screen_x}{\cf1 ,} {\cf5 l_screen_y}{\cf1 ,} {\cf5 l_button_number}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf5 l_has_grab_widget}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf5 l_event_string}{\cf1 :} {\b\cf6 detachable} {\cf4 STRING_8}{\line}
{\tab}{\tab}{\tab}{\cf5 l_call_theme_events}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf5 l_any_event}{\cf1 ,} {\cf5 l_user_event}{\cf1 ,} {\cf5 l_gdk_event_is_sent}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 from}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_motion_tuple} {\cf1 :=} {\cf5 Motion_tuple}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_app_motion_tuple} {\cf1 :=} {\cf5 App_motion_tuple}{\line}
{\tab}{\tab}{\tab}{\b\cf6 until}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_no_more_events} {\b\cf6 or else} {\cf5 is_destroyed}{\line}
{\tab}{\tab}{\tab}{\b\cf6 loop}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 gdk_event} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_get}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 gdk_event} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 event_widget} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_get_event_widget} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gdk_event_is_sent} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_any_struct_send_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )} {\cf1 /=} 0{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_any_event} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_propagate_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_grab_widget} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_grab_get_current}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_grab_widget} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_has_grab_widget} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_grab_widget} {\cf1 :=} {\cf5 event_widget}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_has_grab_widget} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf5 pick_and_drop_source} {\b\cf6 as} l_pnd_src {\b\cf6 and then} {\b\cf6 not} {\cf5 l_pnd_src}{\b\cf1 .}{\cf5 is_displayed} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_src}{\b\cf1 .}{\cf5 end_transport}{\cf1  }{\cf1 (}0{\cf1 ,} 0{\cf1 ,} 0{\cf1 ,} 0{\b\cf1 .}{\cf5 to_double}{\cf1 ,} 0{\b\cf1 .}{\cf5 to_double}{\cf1 ,} 0{\b\cf1 .}{\cf5 to_double}{\cf1 ,} 0{\cf1 ,} 0{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 elseif} {\b\cf6 attached} {\cf5 captured_widget} {\b\cf6 as} l_captured_widget {\b\cf6 and then} {\b\cf6 not} {\cf5 l_captured_widget}{\b\cf1 .}{\cf5 is_displayed} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_captured_widget}{\b\cf1 .}{\cf5 disable_capture}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 inspect} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_any_struct_type} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_motion_notify} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_MOTION_NOTIFY%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_user_event} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 use_stored_display_data} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_x} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_motion_struct_x} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_y} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_motion_struct_y} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_screen_x} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_motion_struct_x_root} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer} {\cf1 +} {\cf5 screen_virtual_x}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_screen_y} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_motion_struct_y_root} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer} {\cf1 +} {\cf5 screen_virtual_y}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 stored_display_data}{\b\cf1 .}{\cf5 window} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_motion_struct_window} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 stored_display_data}{\b\cf1 .}{\cf5 x} {\cf1 :=} {\cf5 l_screen_x}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 stored_display_data}{\b\cf1 .}{\cf5 y} {\cf1 :=} {\cf5 l_screen_y}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 stored_display_data}{\b\cf1 .}{\cf5 mask} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_motion_struct_state} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf5 captured_widget} {\b\cf6 as} l_captured_widget {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_imp} {\cf1 ?=} {\cf5 l_captured_widget}{\b\cf1 .}{\cf5 implementation}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 elseif} {\cf5 pick_and_drop_source} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_imp} {\cf1 :=} {\cf5 pick_and_drop_source}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_imp} {\cf1 ?=} {\cf5 gtk_widget_from_gdk_window}{\cf1  }{\cf1 (}{\cf5 stored_display_data}{\b\cf1 .}{\cf5 window}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_pnd_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 and then} {\cf5 l_pnd_imp}{\b\cf1 .}{\cf5 is_displayed} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp} {\cf1 :=} {\cf5 l_pnd_imp}{\b\cf1 .}{\cf5 top_level_window_imp}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_top_level_window_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 not} {\cf5 l_top_level_window_imp}{\b\cf1 .}{\cf5 has_modal_window} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 pointer_motion_actions_internal} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 ?=} {\cf5 l_pnd_imp}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_widget_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_app_motion_tuple}{\b\cf1 .}{\cf5 widget} {\cf1 :=} {\cf5 l_widget_imp}{\b\cf1 .}{\cf5 attached_interface}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_app_motion_tuple}{\b\cf1 .}{\cf5 x} {\cf1 :=} {\cf5 l_screen_x}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_app_motion_tuple}{\b\cf1 .}{\cf5 y} {\cf1 :=} {\cf5 l_screen_y}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 pointer_motion_actions_internal}{\b\cf1 .}{\cf5 call}{\cf1  }{\cf1 (}{\cf5 l_app_motion_tuple}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_app_motion_tuple}{\b\cf1 .}{\cf5 widget} {\cf1 :=} {\cf5 Default_window}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_object_struct_flags} {\cf1 (}{\cf5 l_pnd_imp}{\b\cf1 .}{\cf5 c_object}{\cf1 )} {\cf1 &} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_sensitive_enum} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_sensitive_enum} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_widget_struct_window} {\cf1 (}{\cf5 l_pnd_imp}{\b\cf1 .}{\cf5 visual_widget}{\cf1 )} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_motion_struct_window} {\cf1 (}{\cf5 gdk_event}{\cf1 )} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 i} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_window_get_origin} {\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_widget_struct_window} {\cf1 (}{\cf5 l_pnd_imp}{\b\cf1 .}{\cf5 visual_widget}{\cf1 )}{\cf1 ,} {\cf1 $}{\cf5 l_widget_x}{\b\cf1 .}{\cf5 to_pointer}{\cf1 ,} {\cf1 $}{\cf5 l_widget_y}{\b\cf1 .}{\cf5 to_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_x} {\cf1 :=} {\cf5 l_screen_x} {\cf1 -} {\cf5 l_widget_x}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_y} {\cf1 :=} {\cf5 l_screen_y} {\cf1 -} {\cf5 l_widget_y}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_motion_tuple}{\b\cf1 .}{\cf5 x} {\cf1 :=} {\cf5 l_widget_x}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_motion_tuple}{\b\cf1 .}{\cf5 y} {\cf1 :=} {\cf5 l_widget_y}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_motion_tuple}{\b\cf1 .}{\cf5 x_tilt} {\cf1 :=} 0.5{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_motion_tuple}{\b\cf1 .}{\cf5 y_tilt} {\cf1 :=} 0.5{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_motion_tuple}{\b\cf1 .}{\cf5 pressure} {\cf1 :=} 0.5{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_motion_tuple}{\b\cf1 .}{\cf5 screen_x} {\cf1 :=} {\cf5 l_screen_x}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_motion_tuple}{\b\cf1 .}{\cf5 screen_y} {\cf1 :=} {\cf5 l_screen_y}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_imp}{\b\cf1 .}{\cf5 on_pointer_motion}{\cf1  }{\cf1 (}{\cf5 l_motion_tuple}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 use_stored_display_data} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_motion_struct_is_hint} {\cf1 (}{\cf5 gdk_event}{\cf1 )} {\cf1 /=} 0 {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 update_display_data}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_button_press}{\cf1 ,} {\cf5 Gdk_2button_press}{\cf1 ,} {\cf5 Gdk_3button_press}{\cf1 ,} {\cf5 Gdk_button_release} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_BUTTON_EVENT%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_user_event} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 process_button_event}{\cf1  }{\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_scroll} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_SCROLL%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 not} {\cf5 is_in_transport} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf5 focused_popup_window} {\b\cf6 as} l_focused_popup_window {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_focused_popup_window}{\b\cf1 .}{\cf5 handle_mouse_button_event}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_button_press_enum}{\cf1 ,} 2{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_scroll_struct_x_root} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer} {\cf1 +} {\cf5 screen_virtual_x}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_scroll_struct_y_root} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer} {\cf1 +} {\cf5 screen_virtual_y}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 event_widget}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_widget_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_scroll_struct_scroll_direction} {\cf1 (}{\cf5 gdk_event}{\cf1 )} {\cf1 =} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_scroll_up_enum} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_button_number} {\cf1 :=} 4{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_button_number} {\cf1 :=} 5{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp}{\b\cf1 .}{\cf5 call_button_event_actions}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_button_press_enum}{\cf1 ,} 0{\cf1 ,} 0{\cf1 ,} {\cf5 l_button_number}{\cf1 ,} 0.5{\cf1 ,} 0.5{\cf1 ,} 0.5{\cf1 ,} 0{\cf1 ,} 0{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_propagate_event} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_user_event} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_proximity_in}{\cf1 ,} {\cf5 Gdk_proximity_out} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_PROXIMITY_IN%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_property_notify} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_PROPERTY_NOTIFY%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_expose} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_EXPOSE%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_no_expose} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_NO_EXPOSE%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_focus_change} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_FOCUS_CHANGE%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 event_widget}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_top_level_window_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp}{\b\cf1 .}{\cf5 on_focus_changed}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_focus_struct_in} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\b\cf1 .}{\cf5 to_boolean}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_configure} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_CONFIGURE%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_window_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 event_widget}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_gtk_window_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_window_imp}{\b\cf1 .}{\cf5 on_size_allocate}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_configure_struct_x} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_configure_struct_y} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_configure_struct_width} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_configure_struct_height} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_window_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_map} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_MAP%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 event_widget}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_widget_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp}{\b\cf1 .}{\cf5 on_widget_mapped}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_unmap} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_UNMAP%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_widget_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 event_widget}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_gtk_widget_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 currently_shown_control} {\cf1 =} {\cf5 l_gtk_widget_imp}{\b\cf1 .}{\cf5 interface} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 set_currently_shown_control}{\cf1  }{\cf1 (}{\b\cf6 Void}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 ?=} {\cf5 l_gtk_widget_imp}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_widget_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp}{\b\cf1 .}{\cf5 on_widget_unmapped}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_widget_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_selection_clear} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_SELECTION_CLEAR%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_selection_request} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_SELECTION_REQUEST%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_selection_notify} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_SELECTION_NOTIFY%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf5 focused_widget} {\b\cf6 as} l_focus_widget {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 ?=} {\cf5 l_focus_widget}{\b\cf1 .}{\cf5 implementation}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 elseif} {\b\cf6 attached} {\cf1 (}{\b\cf6 create}{\cf1  }{\cf1 \{}{\cf4 EV_SCREEN}{\cf1 \}}{\cf1 )}{\b\cf1 .}{\cf5 widget_at_mouse_pointer} {\b\cf6 as} l_focus_widget {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 ?=} {\cf5 l_focus_widget}{\b\cf1 .}{\cf5 implementation}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf1 \{}{\cf4 EV_TEXT_FIELD_IMP}{\cf1 \}} {\cf5 l_widget_imp} {\b\cf6 as} l_text_field_imp {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_text_field_imp}{\b\cf1 .}{\cf5 on_change_actions}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_client_event} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_CLIENT_EVENT%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_visibility_notify} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_VISIBILITY_NOTIFY%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_window_state} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_WINDOW_STATE%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 event_widget}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_top_level_window_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp}{\b\cf1 .}{\cf5 call_window_state_event}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_window_state_struct_changed_mask} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\cf1 ,} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_window_state_struct_new_window_state} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_enter_notify}{\cf1 ,} {\cf5 Gdk_leave_notify} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_ENTER_LEAVE_NOTIFY%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gdk_window} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_any_struct_window} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_gdk_window} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 and then} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_crossing_struct_mode} {\cf1 (}{\cf5 gdk_event}{\cf1 )} {\cf1 =} 0 {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_window_get_user_data} {\cf1 (}{\cf5 l_gdk_window}{\cf1 ,} {\cf1 $}{\cf5 l_gtk_widget_ptr}{\b\cf1 .}{\cf5 to_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_gtk_widget_ptr} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 not} {\cf5 is_in_transport} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 l_gtk_widget_ptr}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_pnd_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 and then} {\cf5 l_pnd_imp}{\b\cf1 .}{\cf5 c_object} {\cf1 =} {\cf5 l_gtk_widget_ptr} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp} {\cf1 :=} {\cf5 l_pnd_imp}{\b\cf1 .}{\cf5 top_level_window_imp}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_top_level_window_imp} {\cf1 =} {\b\cf6 Void} {\b\cf6 or else} {\b\cf6 not} {\cf5 l_top_level_window_imp}{\b\cf1 .}{\cf5 has_modal_window} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 ?=} {\cf5 l_pnd_imp}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_widget_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp}{\b\cf1 .}{\cf5 on_pointer_enter_leave}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_any_struct_type} {\cf1 (}{\cf5 gdk_event}{\cf1 )} {\cf1 =} {\cf5 Gdk_enter_notify}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_widget_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_widget_ptr} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gdk_window} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_key_press}{\cf1 ,} {\cf5 Gdk_key_release} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_KEY_EVENT%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_user_event} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_propagate_event} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf5 focused_popup_window} {\b\cf6 as} l_focused_popup_window {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_widget_imp} {\cf1 :=} {\cf5 l_focused_popup_window}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gdk_window} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_any_struct_window} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_event_any_struct_window} {\cf1 (}{\cf5 gdk_event}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_widget_struct_window} {\cf1 (}{\cf5 l_gtk_widget_imp}{\b\cf1 .}{\cf5 c_object}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_has_grab_widget} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_widget_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 l_grab_widget}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_window_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 l_grab_widget}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_widget_imp} {\cf1 :=} {\cf5 l_gtk_window_imp}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_gtk_widget_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_window_imp} {\cf1 :=} {\cf5 l_gtk_widget_imp}{\b\cf1 .}{\cf5 top_level_gtk_window_imp}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_gtk_window_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp} {\cf1 ?=} {\cf5 l_gtk_window_imp}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_top_level_window_imp} {\cf1 =} {\b\cf6 Void} {\b\cf6 or else} {\b\cf6 not} {\cf5 l_top_level_window_imp}{\b\cf1 .}{\cf5 has_modal_window} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 use_stored_display_data_for_keys} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 stored_display_data}{\b\cf1 .}{\cf5 mask} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_key_struct_state} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_window_imp}{\b\cf1 .}{\cf5 process_key_event}{\cf1  }{\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 use_stored_display_data_for_keys} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_widget_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_window_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_gdk_window} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_event_any_struct_window} {\cf1 (}{\cf5 gdk_event}{\cf1 ,} {\cf5 l_gdk_window}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gdk_window} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_delete} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_DELETE%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_user_event} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_window_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 event_widget}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_gtk_window_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_window_imp}{\b\cf1 .}{\cf5 call_close_request_actions}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gtk_window_imp} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_destroy} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_DESTROY%N"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_drag_enter} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_DRAG_ENTER"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_drag_leave} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_DRAG_LEAVE"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_drag_motion} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_DRAG_MOTION"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_drag_status} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_DRAG_STATUS"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_drop_start} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_DROP_START"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 handle_dnd}{\cf1  }{\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_drop_finished} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_event"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_DROP_FINISHED"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_nothing} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_nothing"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_NOTHING"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Gdk_setting} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 debug} {\cf1 (}"gdk_setting"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 print}{\cf1  }{\cf1 (}"GDK_SETTING"{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 l_event_string}{\b\cf1 .}{\cf5 make_from_c}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_setting_struct_name} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_event_string}{\b\cf1 .}{\cf5 is_equal}{\cf1  }{\cf1 (}{\b\cf6 once} "gtk-theme-name"{\cf1 )} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_theme_events} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 elseif} {\cf5 l_event_string}{\b\cf1 .}{\cf5 is_equal}{\cf1  }{\cf1 (}{\b\cf6 once} "gtk-font-name"{\cf1 )} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_theme_events} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_event_string} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_call_theme_events} {\b\cf6 and then} {\cf5 theme_changed_actions_internal} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 theme_changed_actions_internal}{\b\cf1 .}{\cf5 call}{\cf1  }{\cf1 (}{\b\cf6 Void}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_theme_events} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_call_event} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_call_event} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_propagate_event} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_propagate_event} {\cf1 (}{\cf5 l_grab_widget}{\cf1 ,} {\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 event_widget} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_event_handled} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_widget_event} {\cf1 (}{\cf5 event_widget}{\cf1 ,} {\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_free} {\cf1 (}{\cf5 gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 events_pending} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 process_gtk_events}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_no_more_events} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf5 events_processed_from_underlying_toolkit} {\cf1 :=} {\cf5 l_any_event}{\line}
{\tab}{\tab}{\tab}{\cf5 user_events_processed_from_underlying_toolkit} {\cf1 :=} {\cf5 l_user_event}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 process_gtk_events}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Process Pending gtk events.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_events_processed}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 not} {\cf5 l_events_processed} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 dispatch_events}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 rescue}{\line}
{\tab}{\tab}{\tab}{\cf5 l_events_processed} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\b\cf6 retry}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 gtk_marshal}{\cf1 :} {\cf4 EV_GTK_CALLBACK_MARSHAL}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Marshal object for all gtk signal emission event handling.}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}{\cf4 EV_ANY_I}{\cf1 \}} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 symbol_from_symbol_name} {\cf1 (}{\cf5 a_symbol_name}{\cf1 :} {\cf4 STRING_8}{\cf1 )}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Return Symbol for symbol name }{\cf5 a_symbol_text}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_module}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_symbol_name}{\cf1 :} {\cf4 EV_GTK_C_STRING}{\line}
{\tab}{\tab}{\tab}{\cf5 l_success}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf5 l_result}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 l_module} {\cf1 :=} {\cf5 main_module}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_module} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_symbol_name} {\cf1 :=} {\b\cf6 create} {\cf1 \{}{\b\cf6 attached} {\cf4 EV_GTK_C_STRING}{\cf1 \}}{\b\cf1 .}{\cf5 set_with_eiffel_string}{\cf1  }{\cf1 (}{\cf5 a_symbol_name}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_success} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 g_module_symbol} {\cf1 (}{\cf5 l_module}{\cf1 ,} {\cf5 l_symbol_name}{\b\cf1 .}{\cf5 item}{\cf1 ,} {\cf1 $}{\cf5 l_result}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_success} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 l_result}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}NONE{\cf1 \}} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 main_module}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Module representing }{\cf5 Current}{\cf3  application instance.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_min_ver} {\cf1 >=} 6 {\b\cf6 and then} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 g_module_supported} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 g_module_open} {\cf1 (}{\cf5 default_pointer}{\cf1 ,} 0{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  Access}{\line}
{\line}
{\tab}{\cf5 {\cf5 ctrl_pressed}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Is ctrl key currently pressed?}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 keyboard_modifier_mask} {\cf1 &} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_control_mask_enum} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_control_mask_enum}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 alt_pressed}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Is alt key currently pressed?}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 keyboard_modifier_mask} {\cf1 &} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_mod1_mask_enum} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_mod1_mask_enum}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 shift_pressed}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Is shift key currently pressed?}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 keyboard_modifier_mask} {\cf1 &} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_shift_mask_enum} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_shift_mask_enum}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 caps_lock_on}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Is the Caps or Shift Lock key currently on?}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 keyboard_modifier_mask} {\cf1 &} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_lock_mask_enum} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_lock_mask_enum}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 window_oids}{\cf1 :} {\cf4 LINKED_LIST} {\cf1 [}{\cf4 INTEGER_32}{\cf1 ]}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Global list of window object ids.}{\line}
{\line}
{\tab}{\cf5 {\cf5 windows}{\cf1 :} {\cf4 LINEAR} {\cf1 [}{\cf4 EV_WINDOW}{\cf1 ]}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Global list of windows.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 cur}{\cf1 :} {\cf4 CURSOR}{\line}
{\tab}{\tab}{\tab}{\cf5 w}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_WINDOW_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 id}{\cf1 :} {\cf4 IDENTIFIED}{\line}
{\tab}{\tab}{\tab}{\cf5 l}{\cf1 :} {\cf4 LINKED_LIST} {\cf1 [}{\cf4 EV_WINDOW}{\cf1 ]}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 id}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 l}{\b\cf1 .}{\cf5 make}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 l}{\line}
{\tab}{\tab}{\tab}{\b\cf6 from}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 cur} {\cf1 :=} {\cf5 window_oids}{\b\cf1 .}{\cf5 cursor}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 window_oids}{\b\cf1 .}{\cf5 start}{\line}
{\tab}{\tab}{\tab}{\b\cf6 until}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 window_oids}{\b\cf1 .}{\cf5 after}{\line}
{\tab}{\tab}{\tab}{\b\cf6 loop}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 w} {\cf1 ?=} {\cf5 id}{\b\cf1 .}{\cf5 id_object}{\cf1  }{\cf1 (}{\cf5 window_oids}{\b\cf1 .}{\cf5 item}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 w} {\cf1 =} {\b\cf6 Void} {\b\cf6 or else} {\cf5 w}{\b\cf1 .}{\cf5 is_destroyed} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 window_oids}{\b\cf1 .}{\cf5 remove}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l}{\b\cf1 .}{\cf5 extend}{\cf1  }{\cf1 (}{\cf5 w}{\b\cf1 .}{\cf5 attached_interface}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 window_oids}{\b\cf1 .}{\cf5 forth}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf5 window_oids}{\b\cf1 .}{\cf5 go_to}{\cf1  }{\cf1 (}{\cf5 cur}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 focused_popup_window}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_POPUP_WINDOW_IMP}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Popup Window that is currently focused.}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_focused_popup_window} {\cf1 (}{\cf5 a_window}{\cf1 :} {\b\cf6 like} {\cf5 focused_popup_window}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set }{\cf5 focused_popup_window}{\cf3  to }{\cf5 a_window}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 require}{\line}
{\tab}{\tab}{\tab}{\cf1 valid}{\cf1 :} {\cf1 (}{\cf5 a_window} {\cf1 /=} {\b\cf6 Void} {\b\cf6 and} {\cf5 focused_popup_window} {\cf1 =} {\b\cf6 Void}{\cf1 )} {\b\cf6 or} {\cf1 (}{\cf5 a_window} {\cf1 =} {\b\cf6 Void} {\b\cf6 and} {\cf5 focused_popup_window} {\cf1 /=} {\b\cf6 Void}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 focused_popup_window} {\cf1 :=} {\cf5 a_window}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  Basic operation}{\line}
{\line}
{\tab}{\cf5 {\cf5 call_post_launch_actions}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Call the post launch actions.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 gtk_is_launchable} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_im_context_set_client_window} {\cf1 (}{\cf5 default_input_context}{\cf1 ,} {\cf5 default_gdk_window}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_im_context_focus_in} {\cf1 (}{\cf5 default_input_context}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf1 Precursor}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 process_graphical_events}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Process all pending graphical events and redraws.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_window_process_all_updates}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Motion_tuple}{\cf1 :} {\cf4 TUPLE} {\cf1 [}{\cf5 x}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 x_tilt}{\cf1 :} {\cf4 REAL_64}{\cf1 ;} {\cf5 y_tilt}{\cf1 :} {\cf4 REAL_64}{\cf1 ;} {\cf5 pressure}{\cf1 :} {\cf4 REAL_64}{\cf1 ;} {\cf5 screen_x}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 screen_y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ]}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Tuple optimization}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\b\cf6 Result}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 App_motion_tuple}{\cf1 :} {\cf4 TUPLE} {\cf1 [}{\cf5 widget}{\cf1 :} {\cf4 EV_WIDGET}{\cf1 ;} {\cf5 x}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ]}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Tuple optimization}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 [}{\cf5 Default_widget}{\cf1 ,} 0{\cf1 ,} 0{\cf1 ]}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 process_button_event} {\cf1 (}{\cf5 a_gdk_event}{\cf1 :} {\cf4 POINTER}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Process button event }{\cf5 a_gdk_event}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 require}{\line}
{\tab}{\tab}{\tab}{\cf1 a_gdkevent_not_null}{\cf1 :} {\cf5 a_gdk_event} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_pnd_item}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_PICK_AND_DROPABLE_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_gdk_window}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data}{\cf1 :} {\b\cf6 like} {\cf5 stored_display_data}{\line}
{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_WINDOW_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_popup_parent}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_POPUP_WINDOW_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_ignore_event}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf5 l_text_component_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_TEXT_COMPONENT_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_screen_x}{\cf1 ,} {\cf5 l_screen_y}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 l_screen_x} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_button_struct_x_root} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer} {\cf1 +} {\cf5 screen_virtual_x}{\line}
{\tab}{\tab}{\tab}{\cf5 l_screen_y} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_button_struct_y_root} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer} {\cf1 +} {\cf5 screen_virtual_y}{\line}
{\tab}{\tab}{\tab}{\cf5 use_stored_display_data} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data} {\cf1 :=} {\cf5 stored_display_data}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data}{\b\cf1 .}{\cf5 window} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_button_struct_window} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data}{\b\cf1 .}{\cf5 x} {\cf1 :=} {\cf5 l_screen_x}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data}{\b\cf1 .}{\cf5 y} {\cf1 :=} {\cf5 l_screen_y}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data}{\b\cf1 .}{\cf5 mask} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_button_struct_state} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf5 captured_widget} {\b\cf6 as} l_captured_widget {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_item} {\cf1 ?=} {\cf5 l_captured_widget}{\b\cf1 .}{\cf5 implementation}{\line}
{\tab}{\tab}{\tab}{\b\cf6 elseif} {\cf5 pick_and_drop_source} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_item} {\cf1 :=} {\cf5 pick_and_drop_source}{\line}
{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_gdk_window} {\cf1 :=} {\cf5 l_stored_display_data}{\b\cf1 .}{\cf5 window}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_gdk_window} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_item} {\cf1 ?=} {\cf5 gtk_widget_from_gdk_window}{\cf1  }{\cf1 (}{\cf5 l_gdk_window}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_pnd_item} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_top_level_window_imp} {\cf1 ?=} {\cf5 l_pnd_item}{\b\cf1 .}{\cf5 top_level_window_imp}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_popup_parent} {\cf1 ?=} {\cf5 l_top_level_window_imp}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_popup_parent} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_text_component_imp} {\cf1 ?=} {\cf5 l_pnd_item}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_ignore_event} {\cf1 :=} {\cf5 l_popup_parent} {\cf1 /=} {\b\cf6 Void} {\b\cf6 and then} {\cf5 l_text_component_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 and then} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_button_struct_button} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )} {\cf1 =} 3 {\b\cf6 and then} {\cf1 (}{\cf5 l_pnd_item}{\b\cf1 .}{\cf5 pebble} {\cf1 =} {\b\cf6 Void} {\b\cf6 and} {\cf5 l_pnd_item}{\b\cf1 .}{\cf5 pebble_function} {\cf1 =} {\b\cf6 Void}{\cf1 )} {\b\cf6 or else} {\b\cf6 not} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_widget_is_sensitive} {\cf1 (}{\cf5 l_pnd_item}{\b\cf1 .}{\cf5 c_object}{\cf1 )} {\b\cf6 or else} {\cf5 l_top_level_window_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 and then} {\cf5 l_top_level_window_imp}{\b\cf1 .}{\cf5 has_modal_window} {\b\cf6 and then} {\cf5 captured_widget} {\cf1 =} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_popup_parent} {\cf1 =} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_popup_parent} {\cf1 :=} {\cf5 focused_popup_window}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_popup_parent} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_popup_parent}{\b\cf1 .}{\cf5 handle_mouse_button_event}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_button_struct_type} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_button_struct_button} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )}{\cf1 ,} {\cf5 l_screen_x}{\cf1 ,} {\cf5 l_screen_y}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 not} {\cf5 l_ignore_event} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 pick_and_drop_source} {\cf1 =} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_main_do_event} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_pnd_item} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pnd_item}{\b\cf1 .}{\cf5 on_mouse_button_event}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_button_struct_type} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_button_struct_x} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_button_struct_y} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_button_struct_button} {\cf1 (}{\cf5 a_gdk_event}{\cf1 )}{\cf1 ,} 0.5{\cf1 ,} 0.5{\cf1 ,} 0.5{\cf1 ,} {\cf5 l_screen_x}{\cf1 ,} {\cf5 l_screen_y}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf5 use_stored_display_data} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 handle_dnd} {\cf1 (}{\cf5 a_event}{\cf1 :} {\cf4 POINTER}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Handle drag and drop event.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 a_context}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 a_target_list}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 a_target}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 src_window}{\cf1 ,} {\cf5 dest_window}{\cf1 ,} {\cf5 a_selection}{\cf1 ,} {\cf5 gtkwid}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 a_time}{\cf1 :} {\cf4 NATURAL_32}{\line}
{\tab}{\tab}{\tab}{\cf5 prop_data}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 prop_type}{\cf1 ,} {\cf5 prop_format}{\cf1 ,} {\cf5 prop_length}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf5 a_string}{\cf1 :} {\cf4 STRING_32}{\line}
{\tab}{\tab}{\tab}{\cf5 l_file_list}{\cf1 :} {\b\cf6 detachable} {\cf4 LIST} {\cf1 [}{\cf4 STRING_32}{\cf1 ]}{\line}
{\tab}{\tab}{\tab}{\cf5 l_success}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf5 l_widget_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_WIDGET_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_string}{\cf1 ,} {\cf5 l_file}{\cf1 :} {\cf4 STRING_32}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 from}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_context} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_dnd_struct_context} {\cf1 (}{\cf5 a_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 src_window} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_drag_context_struct_source_window} {\cf1 (}{\cf5 a_context}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_selection} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_drag_get_selection} {\cf1 (}{\cf5 a_context}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_time} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_event_dnd_struct_time} {\cf1 (}{\cf5 a_event}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_target_list} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_drag_context_struct_targets} {\cf1 (}{\cf5 a_context}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_string} {\cf1 :=} {\cf1 \{}{\cf4 STRING_32}{\cf1 \}}"STRING"{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_file} {\cf1 :=} {\cf1 \{}{\cf4 STRING_32}{\cf1 \}}"file://"{\line}
{\tab}{\tab}{\tab}{\b\cf6 until}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_target_list} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer}{\line}
{\tab}{\tab}{\tab}{\b\cf6 loop}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_target} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 glist_struct_data} {\cf1 (}{\cf5 a_target_list}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 a_target} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_selection_convert} {\cf1 (}{\cf5 src_window}{\cf1 ,} {\cf5 a_selection}{\cf1 ,} {\cf5 a_target}{\cf1 ,} {\cf5 a_time}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 prop_length} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_selection_property_get} {\cf1 (}{\cf5 src_window}{\cf1 ,} {\cf1 $}{\cf5 prop_data}{\cf1 ,} {\cf1 $}{\cf5 prop_type}{\b\cf1 .}{\cf5 to_pointer}{\cf1 ,} {\cf1 $}{\cf5 prop_format}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 prop_data} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 a_string}{\b\cf1 .}{\cf5 make_from_c}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_atom_name} {\cf1 (}{\cf5 a_target}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 a_string}{\b\cf1 .}{\cf5 is_equal}{\cf1  }{\cf1 (}{\cf5 l_string}{\cf1 )} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 a_string}{\b\cf1 .}{\cf5 make_from_c}{\cf1  }{\cf1 (}{\cf5 prop_data}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_file_list} {\cf1 :=} {\cf5 a_string}{\b\cf1 .}{\cf5 split}{\cf1  }{\cf1 (}'%N'{\b\cf1 .}{\cf5 to_character_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 from}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_file_list}{\b\cf1 .}{\cf5 start}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 until}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_file_list}{\b\cf1 .}{\cf5 after}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 loop}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_file_list}{\b\cf1 .}{\cf5 item}{\b\cf1 .}{\cf5 substring_index}{\cf1  }{\cf1 (}{\cf5 l_file}{\cf1 ,} 1{\cf1 )} {\cf1 =} 1 {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_file_list}{\b\cf1 .}{\cf5 replace}{\cf1  }{\cf1 (}{\cf5 l_file_list}{\b\cf1 .}{\cf5 item}{\b\cf1 .}{\cf5 substring}{\cf1  }{\cf1 (}8{\cf1 ,} {\cf5 l_file_list}{\b\cf1 .}{\cf5 item}{\b\cf1 .}{\cf5 count}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_success} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_file_list}{\b\cf1 .}{\cf5 forth}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_file_list}{\b\cf1 .}{\cf5 remove}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_target_list} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 glist_struct_next} {\cf1 (}{\cf5 a_target_list}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_success} {\b\cf6 and then} {\b\cf6 attached} {\cf5 l_file_list} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 dest_window} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_drag_context_struct_dest_window} {\cf1 (}{\cf5 a_context}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 dest_window} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_window_get_user_data} {\cf1 (}{\cf5 dest_window}{\cf1 ,} {\cf1 $}{\cf5 gtkwid}{\b\cf1 .}{\cf5 to_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 gtkwid} {\cf1 /=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 null_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 gtkwid}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_widget_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 and then} {\b\cf6 not} {\cf5 l_widget_imp}{\b\cf1 .}{\cf5 is_destroyed} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_widget_imp}{\b\cf1 .}{\cf5 file_drop_actions_internal} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget_imp}{\b\cf1 .}{\cf5 file_drop_actions}{\b\cf1 .}{\cf5 call}{\cf1  }{\cf1 (}{\cf1 [}{\cf5 l_file_list}{\cf1 ]}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 file_drop_actions_internal} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 file_drop_actions_internal}{\b\cf1 .}{\cf5 call}{\cf1  }{\cf1 (}{\cf1 [}{\cf5 l_widget_imp}{\b\cf1 .}{\cf5 attached_interface}{\cf1 ,} {\cf5 l_file_list}{\cf1 ]}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_drop_finish} {\cf1 (}{\cf5 a_context}{\cf1 ,} {\cf5 l_success}{\cf1 ,} {\cf5 a_time}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_nothing}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} -1}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_delete}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 0}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_destroy}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 1}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_expose}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 2}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_motion_notify}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 3}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_button_press}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 4}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_2button_press}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 5}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_3button_press}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 6}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_button_release}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 7}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_key_press}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 8}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_key_release}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 9}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_enter_notify}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 10}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_leave_notify}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 11}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_focus_change}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 12}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_configure}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 13}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_map}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 14}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_unmap}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 15}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_property_notify}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 16}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_selection_clear}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 17}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_selection_request}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 18}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_selection_notify}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 19}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_proximity_in}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 20}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_proximity_out}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 21}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_drag_enter}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 22}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_drag_leave}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 23}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_drag_motion}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 24}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_drag_status}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 25}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_drop_start}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 26}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_drop_finished}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 27}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_client_event}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 28}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_visibility_notify}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 29}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_no_expose}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 30}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_scroll}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 31}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_window_state}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 32}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_setting}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 33}{\line}
{\line}
{\tab}{\cf5 {\cf5 Gdk_owner_change}{\cf1 :} {\cf4 INTEGER_8} {\cf1 =} 34}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  GDK Event Type Constants}{\line}
{\line}
{\tab}{\cf5 {\cf5 sleep} {\cf1 (}{\cf5 msec}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Wait for }{\cf5 msec}{\cf3  milliseconds and return.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 nano_sleep}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_64}{\cf1 \}} 1000000 {\cf1 *} {\cf5 msec}{\b\cf1 .}{\cf5 to_integer_64}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 destroy}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  End the application.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 not} {\cf5 is_destroyed} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 object_unref} {\cf1 (}{\cf5 tooltips}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 set_is_destroyed}{\cf1  }{\cf1 (}{\b\cf6 True}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 destroy_actions}{\b\cf1 .}{\cf5 call}{\cf1  }{\cf1 (}{\b\cf6 Void}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  Status report}{\line}
{\line}
{\tab}{\cf5 {\cf5 tooltip_delay}{\cf1 :} {\cf4 INTEGER_32}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Time in milliseconds before tooltips pop up.}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  Status setting}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_tooltip_delay} {\cf1 (}{\cf5 a_delay}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set }{\cf5 tooltip_delay}{\cf3  to }{\cf5 a_delay}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 tooltip_delay} {\cf1 :=} {\cf5 a_delay}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 gtk_is_launchable} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_tooltips_set_delay} {\cf1 (}{\cf5 tooltips}{\cf1 ,} {\cf5 a_delay}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}{\cf4 EV_PICK_AND_DROPABLE_IMP}{\cf1 ,} {\cf4 EV_DOCKABLE_SOURCE_IMP}{\cf1 \}} {\cf3 --}{\cf3  Pick and drop}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_docking_source} {\cf1 (}{\cf5 a_source}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_DOCKABLE_SOURCE_IMP}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set }{\cf5 docking_source}{\cf3  to }{\cf5 a_source}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 internal_docking_source} {\cf1 :=} {\cf5 a_source}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 on_pick} {\cf1 (}{\cf5 a_source}{\cf1 :} {\cf4 EV_PICK_AND_DROPABLE_IMP}{\cf1 ;} {\cf5 a_pebble}{\cf1 :} {\cf4 ANY}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Called by EV_PICK_AND_DROPABLE_IMP.start_transport}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 internal_pick_and_drop_source} {\cf1 :=} {\cf5 a_source}{\line}
{\tab}{\tab}{\tab}{\cf5 attached_interface}{\b\cf1 .}{\cf5 pick_actions}{\b\cf1 .}{\cf5 call}{\cf1  }{\cf1 (}{\cf1 [}{\cf5 a_pebble}{\cf1 ]}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 on_drop} {\cf1 (}{\cf5 a_pebble}{\cf1 :} {\b\cf6 detachable} {\cf4 ANY}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Called by EV_PICK_AND_DROPABLE_IMP.end_transport}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 internal_pick_and_drop_source} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}{\cf4 EV_ANY_I}{\cf1 \}} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 tooltips}{\cf1 :} {\cf4 POINTER}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Reference to GtkTooltips object.}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 is_in_transport}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Is application currently in transport (either PND or docking)?}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 pick_and_drop_source} {\cf1 /=} {\b\cf6 Void} {\b\cf6 or else} {\cf5 docking_source} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 pick_and_drop_source}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_PICK_AND_DROPABLE_IMP}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Source of pick and drop if any.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 internal_pick_and_drop_source}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 docking_source}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_DOCKABLE_SOURCE_IMP} {\b\cf6 assign} {\cf5 set_docking_source}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Source of docking if any.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 internal_docking_source}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 internal_pick_and_drop_source}{\cf1 :} {\b\cf6 like} {\cf5 pick_and_drop_source}}{\line}
{\line}
{\tab}{\cf5 {\cf5 internal_docking_source}{\cf1 :} {\b\cf6 like} {\cf5 docking_source}}{\line}
{\line}
{\tab}{\cf5 {\cf5 keyboard_modifier_mask}{\cf1 :} {\cf4 NATURAL_32}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Mask representing current keyboard modifiers state.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_display_data}{\cf1 :} {\b\cf6 like} {\cf5 retrieve_display_data}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 use_stored_display_data_for_keys} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_display_data} {\cf1 :=} {\cf5 stored_display_data}{\line}
{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_display_data} {\cf1 :=} {\cf5 retrieve_display_data}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 l_display_data}{\b\cf1 .}{\cf5 mask}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 retrieve_display_data}{\cf1 :} {\cf4 TUPLE} {\cf1 [}{\cf5 window}{\cf1 :} {\cf4 POINTER}{\cf1 ;} {\cf5 x}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 mask}{\cf1 :} {\cf4 NATURAL_32}{\cf1 ]}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Retrieve mouse and keyboard data from the display.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 not} {\cf5 use_stored_display_data} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 update_display_data}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 stored_display_data}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 update_display_data}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Update stored values with current values.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_window}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 temp_mask}{\cf1 :} {\cf4 NATURAL_32}{\line}
{\tab}{\tab}{\tab}{\cf5 temp_x}{\cf1 ,} {\cf5 temp_y}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf5 l_screen}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data}{\cf1 :} {\b\cf6 like} {\cf5 stored_display_data}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data} {\cf1 :=} {\cf5 stored_display_data}{\line}
{\tab}{\tab}{\tab}{\cf5 l_window} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_display_get_window_at_pointer} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_display_get_default}{\cf1 ,} {\cf1 $}{\cf5 temp_x}{\cf1 ,} {\cf1 $}{\cf5 temp_y}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_display_get_pointer} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_display_get_default}{\cf1 ,} {\cf1 $}{\cf5 l_screen}{\cf1 ,} {\cf1 $}{\cf5 temp_x}{\cf1 ,} {\cf1 $}{\cf5 temp_y}{\cf1 ,} {\cf1 $}{\cf5 temp_mask}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data}{\b\cf1 .}{\cf5 window} {\cf1 :=} {\cf5 l_window}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data}{\b\cf1 .}{\cf5 x} {\cf1 :=} {\cf5 temp_x} {\cf1 +} {\cf5 screen_virtual_x}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data}{\b\cf1 .}{\cf5 y} {\cf1 :=} {\cf5 temp_y} {\cf1 +} {\cf5 screen_virtual_y}{\line}
{\tab}{\tab}{\tab}{\cf5 l_stored_display_data}{\b\cf1 .}{\cf5 mask} {\cf1 :=} {\cf5 temp_mask}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Im_context_commit_translate_agent}{\cf1 :} {\cf4 FUNCTION} {\cf1 [}{\cf4 INTEGER_32}{\cf1 ,} {\cf4 POINTER}{\cf1 ,} {\cf4 TUPLE}{\cf1 ]}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Translation agent used input method context commits.}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\b\cf6 agent} {\cf1 (}{\cf5 n}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 p}{\cf1 :} {\cf4 POINTER}{\cf1 )}{\cf1 :} {\cf4 TUPLE}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gchar}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_gchar} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_value_pointer} {\cf1 (}{\cf5 p}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_gchar} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 Reusable_gtk_c_string}{\b\cf1 .}{\cf5 share_from_pointer}{\cf1  }{\cf1 (}{\cf5 l_gchar}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 Reusable_gtk_c_string}{\b\cf1 .}{\cf5 set_with_eiffel_string}{\cf1  }{\cf1 (}""{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 [}{\cf5 Reusable_gtk_c_string}{\cf1 ]}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 character_string_buffer}{\cf1 :} {\cf4 STRING_32}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Character buffer used for storing converted user keyboard character input.}{\line}
{\line}
{\tab}{\cf5 {\cf5 use_stored_display_data}{\cf1 :} {\cf4 BOOLEAN}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Should prestored display data values be used when querying for display data.}{\line}
{\line}
{\tab}{\cf5 {\cf5 use_stored_display_data_for_keys}{\cf1 :} {\cf4 BOOLEAN}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Should prestored display data values be used when querying for key display data.}{\line}
{\line}
{\tab}{\cf5 {\cf5 stored_display_data}{\cf1 :} {\b\cf6 like} {\cf5 retrieve_display_data}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Store for the previous call to 'retrieve_display_data'}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  This is needed to avoid unnecessary roundtrips.}{\line}
{\line}
{\tab}{\cf5 {\cf5 enable_debugger}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Enable the Eiffel debugger.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 debugger_is_disabled} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 debugger_is_disabled} {\cf1 :=} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 set_debug_state}{\cf1  }{\cf1 (}{\cf5 saved_debug_state}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 disable_debugger}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Disable the Eiffel debugger.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 not} {\cf5 debugger_is_disabled} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 debugger_is_disabled} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 saved_debug_state} {\cf1 :=} {\cf5 debug_state}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 disable_debug}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 debugger_is_disabled}{\cf1 :} {\cf4 BOOLEAN}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Is the debugger disabled?}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}{\cf4 EV_ANY_I}{\cf1 ,} {\cf4 EV_FONT_IMP}{\cf1 ,} {\cf4 EV_STOCK_PIXMAPS_IMP}{\cf1 ,} {\cf4 EV_INTERMEDIARY_ROUTINES}{\cf1 \}} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 default_input_context}{\cf1 :} {\cf4 POINTER}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default input context for application.}{\line}
{\line}
{\tab}{\cf5 {\cf5 eif_object_from_gtk_object} {\cf1 (}{\cf5 a_gtk_object}{\cf1 :} {\cf4 POINTER}{\cf1 )}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_ANY_IMP}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Return the EV_ANY_IMP object from }{\cf5 a_gtk_object}{\cf3  if any.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 gtkwid}{\cf1 ,} {\cf5 l_null}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 from}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 gtkwid} {\cf1 :=} {\cf5 a_gtk_object}{\line}
{\tab}{\tab}{\tab}{\b\cf6 until}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 /=} {\b\cf6 Void} {\b\cf6 or else} {\cf5 gtkwid} {\cf1 =} {\cf5 l_null}{\line}
{\tab}{\tab}{\tab}{\b\cf6 loop}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 EV_ANY_IMP}{\cf1 \}}{\b\cf1 .}{\cf5 eif_object_from_c} {\cf1 (}{\cf5 gtkwid}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 gtkwid} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_widget_struct_parent} {\cf1 (}{\cf5 gtkwid}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 Result} {\cf1 /=} {\b\cf6 Void} {\b\cf6 and then} {\b\cf6 Result}{\b\cf1 .}{\cf5 is_destroyed} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 gtk_widget_imp_at_pointer_position}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_GTK_WIDGET_IMP}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Gtk Widget implementation at current mouse pointer position (if any)}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 temp_x}{\cf1 ,} {\cf5 temp_y}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf5 gdkwin}{\cf1 ,} {\cf5 l_null}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 gdkwin} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_display_get_window_at_pointer} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_display_get_default}{\cf1 ,} {\cf1 $}{\cf5 temp_x}{\cf1 ,} {\cf1 $}{\cf5 temp_y}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 gdkwin} {\cf1 /=} {\cf5 l_null} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 gtk_widget_from_gdk_window}{\cf1  }{\cf1 (}{\cf5 gdkwin}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 gtk_widget_from_gdk_window} {\cf1 (}{\cf5 a_gdk_window}{\cf1 :} {\cf4 POINTER}{\cf1 )}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_GTK_WIDGET_IMP}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Gtk Widget implementation from GdkWindow.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 gtkwid}{\cf1 ,} {\cf5 l_null}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_window_get_user_data} {\cf1 (}{\cf5 a_gdk_window}{\cf1 ,} {\cf1 $}{\cf5 gtkwid}{\b\cf1 .}{\cf5 to_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 gtkwid} {\cf1 /=} {\cf5 l_null} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 ?=} {\cf5 eif_object_from_gtk_object}{\cf1  }{\cf1 (}{\cf5 gtkwid}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 gtk_is_launchable}{\cf1 :} {\cf4 BOOLEAN}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Is Gtk launchable?}{\line}
{\line}
{\tab}{\cf5 {\cf5 Default_gtk_window}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Pointer to a default GtkWindow.}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 Default_window_imp}{\b\cf1 .}{\cf5 c_object}{\line}
{\tab}{\tab}{\tab}{\cf5 window_oids}{\b\cf1 .}{\cf5 prune_all}{\cf1  }{\cf1 (}{\cf5 Default_window_imp}{\b\cf1 .}{\cf5 object_id}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 default_gdk_window}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Pointer to a default GdkWindow that may be used to}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  access default visual information (color depth).}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_widget_struct_window} {\cf1 (}{\cf5 Default_gtk_window}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Default_widget}{\cf1 :} {\cf4 EV_WIDGET}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default widget used for creation of tuples.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_widget}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_WIDGET}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\cf5 l_widget} {\cf1 ?=} {\cf5 Default_window}{\line}
{\tab}{\tab}{\tab}{\b\cf6 check}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_widget} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 l_widget}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Default_window}{\cf1 :} {\cf4 EV_WINDOW}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default Window used for creation of agents and holder of clipboard widget.}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\b\cf6 Result}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Default_window_imp}{\cf1 :} {\cf4 EV_WINDOW_IMP}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default window implementation.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_result}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_WINDOW_IMP}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\cf5 l_result} {\cf1 ?=} {\cf5 Default_window}{\b\cf1 .}{\cf5 implementation}{\line}
{\tab}{\tab}{\tab}{\b\cf6 check}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_result} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 l_result}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 default_font_height}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default font height.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 temp_style}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 temp_style} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_widget_struct_style} {\cf1 (}{\cf5 Default_gtk_window}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_font_struct_ascent} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_style_get_font} {\cf1 (}{\cf5 temp_style}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 default_font_ascent}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default font ascent.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 temp_style}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 temp_style} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_widget_struct_style} {\cf1 (}{\cf5 Default_gtk_window}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_font_struct_ascent} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_style_get_font} {\cf1 (}{\cf5 temp_style}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 default_font_descent}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default font descent.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 temp_style}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 temp_style} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_widget_struct_style} {\cf1 (}{\cf5 Default_gtk_window}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_font_struct_descent} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gtk_style_get_font} {\cf1 (}{\cf5 temp_style}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Reusable_rectangle_struct}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Persistent GdkRectangle struct}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 c_gdk_rectangle_struct_allocate}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 c_string_from_eiffel_string} {\cf1 (}{\cf5 a_string}{\cf1 :} {\cf4 READABLE_STRING_GENERAL}{\cf1 )}{\cf1 :} {\cf4 EV_GTK_C_STRING}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Return a EV_GTK_C_STRING from}{\cf5 a_string}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  }{\cf5 item}{\cf3  of result must not be freed by gtk.}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Result must only be used for temporary setting and should not be persistent.}{\line}
{\tab}{\tab}{\b\cf6 require}{\line}
{\tab}{\tab}{\tab}{\cf1 a_string_not_void}{\cf1 :} {\cf5 a_string} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 a_string}{\b\cf1 .}{\cf5 count} {\cf1 >} {\cf5 Default_c_string_size} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\b\cf6 create} {\cf1 \{}{\b\cf6 attached} {\cf4 EV_GTK_C_STRING}{\cf1 \}}{\b\cf1 .}{\cf5 set_with_eiffel_string}{\cf1  }{\cf1 (}{\cf5 a_string}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 Reusable_gtk_c_string}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result}{\b\cf1 .}{\cf5 set_with_eiffel_string}{\cf1  }{\cf1 (}{\cf5 a_string}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Reusable_gtk_c_string}{\cf1 :} {\cf4 EV_GTK_C_STRING}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Persistent EV_GTK_C_STRING.}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\b\cf6 Result}{\b\cf1 .}{\cf5 set_with_eiffel_string}{\cf1  }{\cf1 (}""{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Reusable_color_struct}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Persistent GdkColorStruct}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 c_gdk_color_struct_allocate}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  Thread Handling.}{\line}
{\line}
{\tab}{\cf5 {\cf5 initialize_threading}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Initialize thread support.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf1 \{}{\cf4 PLATFORM}{\cf1 \}}{\b\cf1 .}{\cf5 is_thread_capable} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 idle_action_mutex}{\b\cf1 .}{\cf5 make}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}NONE{\cf1 \}} {\cf3 --}{\cf3  External implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 Default_c_string_size}{\cf1 :} {\cf4 INTEGER_32} {\cf1 =} 1000}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default size to set the reusable gtk C string.}{\line}
{\line}
{\tab}{\cf5 {\cf5 saved_debug_state}{\cf1 :} {\b\cf6 like} {\cf5 debug_state}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Debug mode before debugger was disabled}{\line}
{\line}
{\tab}{\cf5 {\cf5 enable_ev_gtk_log} {\cf1 (}{\cf5 a_mode}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Connect GTK+ logging to Eiffel exception handler.}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  }{\cf5 a_mode}{\cf3  = 0 means no log messages, 1 = messages, 2 = messages with exceptions.}{\line}
{\tab}{\tab}{\b\cf6 external}{\line}
{\tab}{\tab}{\tab}"C (EIF_INTEGER) | %"ev_c_util.h%""{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 gtk_init}{\line}
{\tab}{\tab}{\b\cf6 external}{\line}
{\tab}{\tab}{\tab}"C [macro <ev_gtk.h>] | %"eif_argv.h%""{\line}
{\tab}{\tab}{\b\cf6 alias}{\line}
{\tab}{\tab}{\tab}"gtk_init (&eif_argc, &eif_argv)"{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 gtk_init_check}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\b\cf6 external}{\line}
{\tab}{\tab}{\tab}"C [macro <ev_gtk.h>] | %"eif_argv.h%""{\line}
{\tab}{\tab}{\b\cf6 alias}{\line}
{\tab}{\tab}{\tab}"gtk_init_check (&eif_argc, &eif_argv)"{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}NONE{\cf1 \}} {\cf3 --}{\cf3  Externals}{\line}
{\line}
{\tab}{\cf5 {\cf5 static_mutex}{\cf1 :} {\cf4 POINTER}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Pointer to the global static mutex}{\line}
{\tab}{\line}
{\b\cf6 note}{\line}
{\tab}{\cf1 copyright}{\cf1 :} "Copyright (c) 1984-2015, Eiffel Software and others"{\line}
{\tab}{\cf1 license}{\cf1 :} "Eiffel Forum License v2 (see http://www.eiffel.com/licensing/forum.txt)"{\line}
{\tab}{\cf1 source}{\cf1 :} "[{\line}
{\tab}{\tab}Eiffel Software{\line}
{\tab}{\tab}5949 Hollister Ave., Goleta, CA 93117 USA{\line}
{\tab}{\tab}Telephone 805-685-1006, Fax 805-685-6869{\line}
{\tab}{\tab}Website http://www.eiffel.com{\line}
{\tab}{\tab}Customer support http://support.eiffel.com{\line}
{\tab}]"{\line}
{\line}
{\b\cf6 end} {\cf3 --} {\cf3 class }{\cf4 EV_APPLICATION_IMP}}
{\line}
{\cf3 {\tab}{\tab}{\tab}-- Generated by ISE Eiffel --}
{\line}
{\cf3{\tab}{\tab}{\tab}-- For more details: http://www.eiffel.com --}
}}
{\line}
