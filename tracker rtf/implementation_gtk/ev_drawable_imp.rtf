{\rtf1\ansi\ansicpg1252\deflang1033{\fonttbl{\f0\fscript\fcharset0 Courier;}}{\colortbl ;\red0\green0\blue0;\red255\green255\blue255;\red128\green0\blue0;\red0\green0\blue255;\red0\green128\blue0;\red0\green0\blue128;}
{\cf3\f0\fs16 {\tab}{\tab}{\tab}-- Automatic generation produced by ISE Eiffel --
{\line}
{{\b\cf6 note}{\line}
{\tab}{\cf1 description}{\cf1 :} "EiffelVision drawable. GTK implementation."{\line}
{\tab}{\cf1 legal}{\cf1 :} "See notice at end of class."{\line}
{\tab}{\cf1 status}{\cf1 :} "See notice at end of class."{\line}
{\tab}{\cf1 keywords}{\cf1 :} "figures, primitives, drawing, line, point, ellipse"{\line}
{\tab}{\cf1 date}{\cf1 :} "$Date: 2014-04-16 17:43:52 -0700 (Wed, 16 Apr 2014) $"{\line}
{\tab}{\cf1 revision}{\cf1 :} "$Revision: 94882 $"{\line}
{\line}
{\b\cf6 deferred} {\b\cf6 class} {\line}
{\tab}{\cf4 EV_DRAWABLE_IMP}{\line}
{\line}
{\b\cf6 inherit}{\line}
{\tab}{\cf4 EV_DRAWABLE_I}{\line}
{\tab}{\tab}{\b\cf6 redefine}{\line}
{\tab}{\tab}{\tab}{\cf5 interface}{\cf1 ,}{\line}
{\tab}{\tab}{\tab}{\cf5 draw_sub_pixel_buffer}{\line}
{\tab}{\tab}{\b\cf6 end}{\line}
{\line}
{\tab}{\cf4 EV_DRAWABLE_CONSTANTS}{\line}
{\line}
{\tab}{\cf4 DISPOSABLE}{\line}
{\tab}{\tab}{\b\cf6 undefine}{\line}
{\tab}{\tab}{\tab}{\cf5 copy}{\cf1 ,}{\line}
{\tab}{\tab}{\tab}{\cf5 default_create}{\line}
{\tab}{\tab}{\b\cf6 end}{\line}
{\line}
{\tab}{\cf4 PLATFORM}{\line}
{\tab}{\tab}{\b\cf6 undefine}{\line}
{\tab}{\tab}{\tab}{\cf5 copy}{\cf1 ,}{\line}
{\tab}{\tab}{\tab}{\cf5 default_create}{\line}
{\tab}{\tab}{\b\cf6 end}{\line}
{\line}
{\tab}{\cf4 MATH_CONST}{\line}
{\line}
{\b\cf6 feature} {\cf1 \{}NONE{\cf1 \}} {\cf3 --}{\cf3  Initialization}{\line}
{\line}
{\tab}{\cf5 {\cf5 init_default_values}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set default values. Call during initialization.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_mem}{\cf1 :} {\cf4 INTEGER_16}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 l_mem} {\cf1 :=} {\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}} 3 {\cf1 |} {\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}} 3 {\cf1 |<<} {\cf5 Integer_8_bits}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 set_dashes_pattern}{\cf1  }{\cf1 (}{\cf5 gc}{\cf1 ,} {\cf1 $}{\cf5 l_mem}{\b\cf1 .}{\cf5 to_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 line_style} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_line_solid_enum}{\line}
{\tab}{\tab}{\tab}{\cf5 set_drawing_mode}{\cf1  }{\cf1 (}{\cf5 Drawing_mode_copy}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 set_line_width}{\cf1  }{\cf1 (}1{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}{\cf4 EV_ANY_I}{\cf1 \}} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 gc}{\cf1 :} {\cf4 POINTER}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Pointer to GdkGC struct.}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  The graphics context applied to the primitives.}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Line style, width, colors, etc. are defined in here.}{\line}
{\line}
{\tab}{\cf5 {\cf5 gcvalues}{\cf1 :} {\cf4 POINTER}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Pointer to GdkGCValues struct.}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Is allocated during creation but has to be updated}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  every time it is accessed.}{\line}
{\line}
{\tab}{\cf5 {\cf5 drawable}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Pointer to the GdkWindow of }{\cf5 c_object}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 deferred}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 mask}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Pointer to the mask used by }{\cf5 Current}{\line}
{\tab}{\tab}{\b\cf6 deferred}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}{\cf4 EV_DRAWABLE_IMP}{\cf1 \}} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 line_style}{\cf1 :} {\cf4 INTEGER_32}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Dash-style used when drawing lines.}{\line}
{\line}
{\tab}{\cf5 {\cf5 cap_style}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Style used for drawing end of lines.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_cap_round_enum}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 join_style}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Way in which lines are joined together.				}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_join_bevel_enum}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 gc_clip_area}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_RECTANGLE}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Clip area currently used by }{\cf5 gc}{\cf3 .}{\line}
{\line}
{\tab}{\cf5 {\cf5 height}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Needed by }{\cf5 draw_straight_line}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 deferred}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 width}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Needed by }{\cf5 draw_straight_line}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 deferred}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  Access}{\line}
{\line}
{\tab}{\cf5 {\cf5 font}{\cf1 :} {\cf4 EV_FONT}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Font used for drawing text.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf5 internal_font_imp} {\b\cf6 as} l_internal_font_imp {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 l_internal_font_imp}{\b\cf1 .}{\cf5 attached_interface}{\b\cf1 .}{\cf5 twin}{\line}
{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\b\cf6 Result}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 foreground_color_internal}{\cf1 :} {\cf4 EV_COLOR}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Color used to draw primitives.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_red}{\cf1 ,} {\cf5 l_green}{\cf1 ,} {\cf5 l_blue}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf5 internal_foreground_color} {\b\cf6 as} l_internal_foreground_color {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_red} {\cf1 :=} {\cf5 l_internal_foreground_color}{\b\cf1 .}{\cf5 red_8_bit}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_green} {\cf1 :=} {\cf5 l_internal_foreground_color}{\b\cf1 .}{\cf5 green_8_bit}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_blue} {\cf1 :=} {\cf5 l_internal_foreground_color}{\b\cf1 .}{\cf5 blue_8_bit}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\b\cf6 Result}{\b\cf1 .}{\cf5 make_with_8_bit_rgb}{\cf1  }{\cf1 (}{\cf5 l_red}{\cf1 ,} {\cf5 l_green}{\cf1 ,} {\cf5 l_blue}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 background_color_internal}{\cf1 :} {\cf4 EV_COLOR}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Color used for erasing of canvas.}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default: white.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_red}{\cf1 ,} {\cf5 l_green}{\cf1 ,} {\cf5 l_blue}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf5 internal_background_color} {\b\cf6 as} l_internal_background_color {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_red} {\cf1 :=} {\cf5 l_internal_background_color}{\b\cf1 .}{\cf5 red_8_bit}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_green} {\cf1 :=} {\cf5 l_internal_background_color}{\b\cf1 .}{\cf5 green_8_bit}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_blue} {\cf1 :=} {\cf5 l_internal_background_color}{\b\cf1 .}{\cf5 blue_8_bit}{\line}
{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_red} {\cf1 :=} 255{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_green} {\cf1 :=} 255{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_blue} {\cf1 :=} 255{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\b\cf6 Result}{\b\cf1 .}{\cf5 make_with_8_bit_rgb}{\cf1  }{\cf1 (}{\cf5 l_red}{\cf1 ,} {\cf5 l_green}{\cf1 ,} {\cf5 l_blue}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 line_width}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Line thickness.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 gcvalues} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 c_gdk_gcvalues_struct_allocate}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_get_values} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 gcvalues}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gcvalues_struct_line_width} {\cf1 (}{\cf5 gcvalues}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 gcvalues}{\b\cf1 .}{\cf5 memory_free}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 drawing_mode}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Logical operation on pixels when drawing.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 gdk_drawing_mode}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 gcvalues} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 c_gdk_gcvalues_struct_allocate}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_get_values} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 gcvalues}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 gdk_drawing_mode} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gcvalues_struct_function} {\cf1 (}{\cf5 gcvalues}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 gcvalues}{\b\cf1 .}{\cf5 memory_free}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 gdk_drawing_mode} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_copy_enum} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 Drawing_mode_copy}{\line}
{\tab}{\tab}{\tab}{\b\cf6 elseif} {\cf5 gdk_drawing_mode} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_xor_enum} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 Drawing_mode_xor}{\line}
{\tab}{\tab}{\tab}{\b\cf6 elseif} {\cf5 gdk_drawing_mode} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_invert_enum} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 Drawing_mode_invert}{\line}
{\tab}{\tab}{\tab}{\b\cf6 elseif} {\cf5 gdk_drawing_mode} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_and_enum} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 Drawing_mode_and}{\line}
{\tab}{\tab}{\tab}{\b\cf6 elseif} {\cf5 gdk_drawing_mode} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_or_enum} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 Drawing_mode_or}{\line}
{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 check}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 drawing_mode_existent}{\cf1 :} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 clip_area}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_RECTANGLE}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Clip area used to clip drawing.}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  If set to Void, no clipping is applied.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf5 gc_clip_area} {\b\cf6 as} l_gc_clip_area {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 l_gc_clip_area}{\b\cf1 .}{\cf5 twin}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 tile}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_PIXMAP}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Pixmap that is used to fill instead of background_color.}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  If set to Void, }{\cf5 background_color}{\cf3  is used to fill.}{\line}
{\line}
{\tab}{\cf5 {\cf5 dashed_line_style}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Are lines drawn dashed?}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 style}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 gcvalues} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 c_gdk_gcvalues_struct_allocate}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_get_values} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 gcvalues}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 style} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gcvalues_struct_line_style} {\cf1 (}{\cf5 gcvalues}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 gcvalues}{\b\cf1 .}{\cf5 memory_free}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 style} {\cf1 =} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_line_on_off_dash_enum}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  Element change}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_font} {\cf1 (}{\cf5 a_font}{\cf1 :} {\cf4 EV_FONT}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set }{\cf5 font}{\cf3  to }{\cf5 a_font}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 attached} {\cf1 \{}{\cf4 EV_FONT_IMP}{\cf1 \}} {\cf5 a_font}{\b\cf1 .}{\cf5 implementation} {\b\cf6 as} l_font_imp {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 internal_font_imp} {\cf1 :=} {\cf5 l_font_imp}{\line}
{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 check}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_background_color} {\cf1 (}{\cf5 a_color}{\cf1 :} {\cf4 EV_COLOR}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Assign }{\cf5 a_color}{\cf3  to }{\cf5 background_color}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_internal_background_color}{\cf1 :} {\b\cf6 detachable} {\b\cf6 like} {\cf5 internal_background_color}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 l_internal_background_color} {\cf1 :=} {\cf5 internal_background_color}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_internal_background_color} {\cf1 =} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 l_internal_background_color}{\b\cf1 .}{\cf5 make_with_8_bit_rgb}{\cf1  }{\cf1 (}255{\cf1 ,} 255{\cf1 ,} 255{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 internal_background_color} {\cf1 :=} {\cf5 l_internal_background_color}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 not} {\cf5 l_internal_background_color}{\b\cf1 .}{\cf5 is_equal}{\cf1  }{\cf1 (}{\cf5 a_color}{\cf1 )} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_internal_background_color}{\b\cf1 .}{\cf5 set_red_with_8_bit}{\cf1  }{\cf1 (}{\cf5 a_color}{\b\cf1 .}{\cf5 red_8_bit}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_internal_background_color}{\b\cf1 .}{\cf5 set_green_with_8_bit}{\cf1  }{\cf1 (}{\cf5 a_color}{\b\cf1 .}{\cf5 green_8_bit}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_internal_background_color}{\b\cf1 .}{\cf5 set_blue_with_8_bit}{\cf1  }{\cf1 (}{\cf5 a_color}{\b\cf1 .}{\cf5 blue_8_bit}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 internal_set_color}{\cf1  }{\cf1 (}{\b\cf6 False}{\cf1 ,} {\cf5 a_color}{\b\cf1 .}{\cf5 red_16_bit}{\cf1 ,} {\cf5 a_color}{\b\cf1 .}{\cf5 green_16_bit}{\cf1 ,} {\cf5 a_color}{\b\cf1 .}{\cf5 blue_16_bit}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_foreground_color} {\cf1 (}{\cf5 a_color}{\cf1 :} {\cf4 EV_COLOR}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Assign }{\cf5 a_color}{\cf3  to }{\cf5 foreground_color}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_internal_foreground_color}{\cf1 :} {\b\cf6 detachable} {\b\cf6 like} {\cf5 internal_foreground_color}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 l_internal_foreground_color} {\cf1 :=} {\cf5 internal_foreground_color}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_internal_foreground_color} {\cf1 =} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 l_internal_foreground_color}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 internal_foreground_color} {\cf1 :=} {\cf5 l_internal_foreground_color}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 not} {\cf5 l_internal_foreground_color}{\b\cf1 .}{\cf5 is_equal}{\cf1  }{\cf1 (}{\cf5 a_color}{\cf1 )} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_internal_foreground_color}{\b\cf1 .}{\cf5 set_red_with_8_bit}{\cf1  }{\cf1 (}{\cf5 a_color}{\b\cf1 .}{\cf5 red_8_bit}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_internal_foreground_color}{\b\cf1 .}{\cf5 set_green_with_8_bit}{\cf1  }{\cf1 (}{\cf5 a_color}{\b\cf1 .}{\cf5 green_8_bit}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_internal_foreground_color}{\b\cf1 .}{\cf5 set_blue_with_8_bit}{\cf1  }{\cf1 (}{\cf5 a_color}{\b\cf1 .}{\cf5 blue_8_bit}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 internal_set_color}{\cf1  }{\cf1 (}{\b\cf6 True}{\cf1 ,} {\cf5 a_color}{\b\cf1 .}{\cf5 red_16_bit}{\cf1 ,} {\cf5 a_color}{\b\cf1 .}{\cf5 green_16_bit}{\cf1 ,} {\cf5 a_color}{\b\cf1 .}{\cf5 blue_16_bit}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_line_width} {\cf1 (}{\cf5 a_width}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Assign }{\cf5 a_width}{\cf3  to }{\cf5 line_width}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_line_attributes} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 line_style}{\cf1 ,} {\cf5 cap_style}{\cf1 ,} {\cf5 join_style}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_drawing_mode} {\cf1 (}{\cf5 a_mode}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set drawing mode to }{\cf5 a_mode}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_gc}{\cf1 :} {\b\cf6 like} {\cf5 gc}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 l_gc} {\cf1 :=} {\cf5 gc}{\line}
{\tab}{\tab}{\tab}{\b\cf6 inspect} {\cf5 a_mode}{\line}
{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Drawing_mode_copy} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_function} {\cf1 (}{\cf5 l_gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_copy_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Drawing_mode_xor} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_function} {\cf1 (}{\cf5 l_gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_xor_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Drawing_mode_invert} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_function} {\cf1 (}{\cf5 l_gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_invert_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Drawing_mode_and} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_function} {\cf1 (}{\cf5 l_gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_and_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 when} {\cf5 Drawing_mode_or} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_function} {\cf1 (}{\cf5 l_gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_or_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 check}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 drawing_mode_existent}{\cf1 :} {\b\cf6 False}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_clip_area} {\cf1 (}{\cf5 an_area}{\cf1 :} {\cf4 EV_RECTANGLE}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set an area to clip to.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 rectangle_struct}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 gc_clip_area} {\cf1 :=} {\cf5 an_area}{\b\cf1 .}{\cf5 twin}{\line}
{\tab}{\tab}{\tab}{\cf5 rectangle_struct} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 c_gdk_rectangle_struct_allocate}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_rectangle_struct_x} {\cf1 (}{\cf5 rectangle_struct}{\cf1 ,} {\cf5 an_area}{\b\cf1 .}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_rectangle_struct_y} {\cf1 (}{\cf5 rectangle_struct}{\cf1 ,} {\cf5 an_area}{\b\cf1 .}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_rectangle_struct_width} {\cf1 (}{\cf5 rectangle_struct}{\cf1 ,} {\cf5 an_area}{\b\cf1 .}{\cf5 width}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_rectangle_struct_height} {\cf1 (}{\cf5 rectangle_struct}{\cf1 ,} {\cf5 an_area}{\b\cf1 .}{\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_clip_region} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 default_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_clip_rectangle} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 rectangle_struct}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 rectangle_struct}{\b\cf1 .}{\cf5 memory_free}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_clip_region} {\cf1 (}{\cf5 a_region}{\cf1 :} {\cf4 EV_REGION}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set a region to clip to.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 a_region_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_REGION_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 rectangle_struct}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 rectangle_struct} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 c_gdk_rectangle_struct_allocate}{\line}
{\tab}{\tab}{\tab}{\cf5 a_region_imp} {\cf1 ?=} {\cf5 a_region}{\b\cf1 .}{\cf5 implementation}{\line}
{\tab}{\tab}{\tab}{\b\cf6 check}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 a_region_imp} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_region_get_clipbox} {\cf1 (}{\cf5 a_region_imp}{\b\cf1 .}{\cf5 gdk_region}{\cf1 ,} {\cf5 rectangle_struct}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 gc_clip_area}{\b\cf1 .}{\cf5 make}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_rectangle_struct_x} {\cf1 (}{\cf5 rectangle_struct}{\cf1 )} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_rectangle_struct_y} {\cf1 (}{\cf5 rectangle_struct}{\cf1 )} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_rectangle_struct_width} {\cf1 (}{\cf5 rectangle_struct}{\cf1 )}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_rectangle_struct_height} {\cf1 (}{\cf5 rectangle_struct}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_clip_rectangle} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 default_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_clip_region} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 a_region_imp}{\b\cf1 .}{\cf5 gdk_region}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 rectangle_struct}{\b\cf1 .}{\cf5 memory_free}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 remove_clipping}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Do not apply any clipping.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 gc_clip_area} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_clip_rectangle} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 default_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_clip_region} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 default_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_tile} {\cf1 (}{\cf5 a_pixmap}{\cf1 :} {\cf4 EV_PIXMAP}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set tile used to fill figures.}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set to Void to use }{\cf5 background_color}{\cf3  to fill.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 tile_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_PIXMAP_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_tile}{\cf1 :} {\b\cf6 like} {\cf5 tile}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 l_tile}{\line}
{\tab}{\tab}{\tab}{\cf5 tile} {\cf1 :=} {\cf5 l_tile}{\line}
{\tab}{\tab}{\tab}{\cf5 l_tile}{\b\cf1 .}{\cf5 copy}{\cf1  }{\cf1 (}{\cf5 a_pixmap}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 tile_imp} {\cf1 ?=} {\cf5 l_tile}{\b\cf1 .}{\cf5 implementation}{\line}
{\tab}{\tab}{\tab}{\b\cf6 check}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 tile_imp} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_tile} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 tile_imp}{\b\cf1 .}{\cf5 drawable}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 remove_tile}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Do not apply a tile when filling.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 tile} {\cf1 :=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 enable_dashed_line_style}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw lines dashed.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 line_style} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_line_on_off_dash_enum}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_line_attributes} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 line_width}{\cf1 ,} {\cf5 line_style}{\cf1 ,} {\cf5 cap_style}{\cf1 ,} {\cf5 join_style}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 disable_dashed_line_style}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw lines solid.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 line_style} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_line_solid_enum}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_line_attributes} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 line_width}{\cf1 ,} {\cf5 line_style}{\cf1 ,} {\cf5 cap_style}{\cf1 ,} {\cf5 join_style}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  Clearing operations}{\line}
{\line}
{\tab}{\cf5 {\cf5 clear}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Erase }{\cf5 Current}{\cf3  with }{\cf5 background_color}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 clear_rectangle}{\cf1  }{\cf1 (}0{\cf1 ,} 0{\cf1 ,} {\cf5 width}{\cf1 ,} {\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 clear_rectangle} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Erase rectangle specified with }{\cf5 background_color}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 tmp_fg_color}{\cf1 ,} {\cf5 tmp_bg_color}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_COLOR}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 tmp_fg_color} {\cf1 :=} {\cf5 internal_foreground_color}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 tmp_fg_color} {\cf1 =} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 tmp_fg_color} {\cf1 :=} {\cf5 foreground_color}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 tmp_bg_color} {\cf1 :=} {\cf5 internal_background_color}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 tmp_bg_color} {\cf1 =} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 tmp_bg_color} {\cf1 :=} {\cf5 background_color}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 internal_set_color}{\cf1  }{\cf1 (}{\b\cf6 True}{\cf1 ,} {\cf5 tmp_bg_color}{\b\cf1 .}{\cf5 red_16_bit}{\cf1 ,} {\cf5 tmp_bg_color}{\b\cf1 .}{\cf5 green_16_bit}{\cf1 ,} {\cf5 tmp_bg_color}{\b\cf1 .}{\cf5 blue_16_bit}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_rectangle} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} 1{\cf1 ,} {\cf1 (}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 internal_set_color}{\cf1  }{\cf1 (}{\b\cf6 True}{\cf1 ,} {\cf5 tmp_fg_color}{\b\cf1 .}{\cf5 red_16_bit}{\cf1 ,} {\cf5 tmp_fg_color}{\b\cf1 .}{\cf5 green_16_bit}{\cf1 ,} {\cf5 tmp_fg_color}{\b\cf1 .}{\cf5 blue_16_bit}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  Drawing operations}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_point} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw point at (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ).}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_point} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} {\cf1 (}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_text} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_text}{\cf1 :} {\cf4 READABLE_STRING_GENERAL}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw }{\cf5 a_text}{\cf3  with left of baseline at (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ) using }{\cf5 font}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 draw_text_internal}{\cf1  }{\cf1 (}{\cf5 x}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 y}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_text}{\cf1 ,} {\b\cf6 True}{\cf1 ,} -1{\cf1 ,} 0{\b\cf1 .}{\cf5 to_real}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_rotated_text} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 angle}{\cf1 :} {\cf4 REAL_32}{\cf1 ;} {\cf5 a_text}{\cf1 :} {\cf4 READABLE_STRING_GENERAL}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw rotated text }{\cf5 a_text}{\cf3  with left of baseline at (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ) using }{\cf5 font}{\cf3 .}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Rotation is number of radians counter-clockwise from horizontal plane.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 draw_text_internal}{\cf1  }{\cf1 (}{\cf5 x}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 y}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_text}{\cf1 ,} {\b\cf6 True}{\cf1 ,} -1{\cf1 ,} {\cf5 angle}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_ellipsed_text} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_text}{\cf1 :} {\cf4 READABLE_STRING_GENERAL}{\cf1 ;} {\cf5 clipping_width}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw }{\cf5 a_text}{\cf3  with left of baseline at (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ) using }{\cf5 font}{\cf3 .}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Text is clipped to }{\cf5 clipping_width}{\cf3  in pixels and ellipses are displayed}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  to show truncated characters if any.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 draw_text_internal}{\cf1  }{\cf1 (}{\cf5 x}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 y}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_text}{\cf1 ,} {\b\cf6 True}{\cf1 ,} {\cf5 clipping_width}{\cf1 ,} 0{\b\cf1 .}{\cf5 to_real}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_ellipsed_text_top_left} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_text}{\cf1 :} {\cf4 READABLE_STRING_GENERAL}{\cf1 ;} {\cf5 clipping_width}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw }{\cf5 a_text}{\cf3  with top left corner at (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ) using }{\cf5 font}{\cf3 .}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Text is clipped to }{\cf5 clipping_width}{\cf3  in pixels and ellipses are displayed}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  to show truncated characters if any.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 draw_text_internal}{\cf1  }{\cf1 (}{\cf5 x}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 y}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_text}{\cf1 ,} {\b\cf6 False}{\cf1 ,} {\cf5 clipping_width}{\cf1 ,} 0{\b\cf1 .}{\cf5 to_real}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_text_top_left} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_text}{\cf1 :} {\cf4 READABLE_STRING_GENERAL}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw }{\cf5 a_text}{\cf3  with top left corner at (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ) using }{\cf5 font}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 draw_text_internal}{\cf1  }{\cf1 (}{\cf5 x}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 y}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_text}{\cf1 ,} {\b\cf6 False}{\cf1 ,} -1{\cf1 ,} 0{\b\cf1 .}{\cf5 to_real}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_text_internal} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_text}{\cf1 :} {\cf4 READABLE_STRING_GENERAL}{\cf1 ;} {\cf5 draw_from_baseline}{\cf1 :} {\cf4 BOOLEAN}{\cf1 ;} {\cf5 a_width}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_angle}{\cf1 :} {\cf4 REAL_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw }{\cf5 a_text}{\cf3  at (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ) using }{\cf5 font}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 a_cs}{\cf1 :} {\cf4 EV_GTK_C_STRING}{\line}
{\tab}{\tab}{\tab}{\cf5 a_pango_layout}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 x_orig}{\cf1 ,} {\cf5 y_orig}{\cf1 ,} {\cf5 a_x}{\cf1 ,} {\cf5 a_y}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf5 a_clip_area}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_RECTANGLE}{\line}
{\tab}{\tab}{\tab}{\cf5 a_pango_matrix}{\cf1 ,} {\cf5 a_pango_context}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_app_imp}{\cf1 :} {\b\cf6 like} {\cf5 app_implementation}{\line}
{\tab}{\tab}{\tab}{\cf5 l_pango_renderer}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_ellipsize_symbol}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_app_imp} {\cf1 :=} {\cf5 app_implementation}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 x_orig} {\cf1 :=} {\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 y_orig} {\cf1 :=} {\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_x} {\cf1 :=} {\cf5 x_orig}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 draw_from_baseline} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 internal_font_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 a_y} {\cf1 :=} {\cf5 y_orig} {\cf1 -} {\cf5 internal_font_imp}{\b\cf1 .}{\cf5 ascent}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 a_y} {\cf1 :=} {\cf5 y_orig} {\cf1 -} {\cf5 l_app_imp}{\b\cf1 .}{\cf5 default_font_ascent}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 a_y} {\cf1 :=} {\cf5 y_orig}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_cs} {\cf1 :=} {\cf5 l_app_imp}{\b\cf1 .}{\cf5 c_string_from_eiffel_string}{\cf1  }{\cf1 (}{\cf5 a_text}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_pango_layout} {\cf1 :=} {\cf5 l_app_imp}{\b\cf1 .}{\cf5 Pango_layout}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_layout_set_text} {\cf1 (}{\cf5 a_pango_layout}{\cf1 ,} {\cf5 a_cs}{\b\cf1 .}{\cf5 item}{\cf1 ,} {\cf5 a_cs}{\b\cf1 .}{\cf5 string_length}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 internal_font_imp} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_layout_set_font_description} {\cf1 (}{\cf5 a_pango_layout}{\cf1 ,} {\cf5 internal_font_imp}{\b\cf1 .}{\cf5 font_description}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 a_width} {\cf1 /=} -1 {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_ellipsize_symbol} {\cf1 :=} {\cf5 Pango_layout_set_ellipsize_symbol}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_ellipsize_symbol} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 pango_layout_set_ellipsize_call}{\cf1  }{\cf1 (}{\cf5 l_ellipsize_symbol}{\cf1 ,} {\cf5 a_pango_layout}{\cf1 ,} 3{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_layout_set_width} {\cf1 (}{\cf5 a_pango_layout}{\cf1 ,} {\cf5 a_width} {\cf1 *} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_scale}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 a_clip_area} {\cf1 :=} {\cf5 gc_clip_area}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 set_clip_area}{\cf1  }{\cf1 (}{\b\cf6 create}{\cf1  }{\cf1 \{}{\cf4 EV_RECTANGLE}{\cf1 \}}{\b\cf1 .}{\cf5 make}{\cf1  }{\cf1 (}{\cf5 x_orig}{\cf1 ,} {\cf5 y_orig}{\cf1 ,} {\cf5 a_width}{\cf1 ,} 10000{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_layout_set_width} {\cf1 (}{\cf5 a_pango_layout}{\cf1 ,} 10000 {\cf1 *} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_scale}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 a_angle} {\cf1 /=} 0{\b\cf1 .}{\cf5 to_real} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pango_renderer} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pango_renderer_get_default} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_default}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pango_renderer_set_drawable} {\cf1 (}{\cf5 l_pango_renderer}{\cf1 ,} {\cf5 drawable}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pango_renderer_set_gc} {\cf1 (}{\cf5 l_pango_renderer}{\cf1 ,} {\cf5 gc}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 a_pango_context} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_layout_get_context} {\cf1 (}{\cf5 a_pango_layout}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_matrix_init} {\cf1 (}{\cf1 $}{\cf5 a_pango_matrix}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_matrix_translate} {\cf1 (}{\cf5 a_pango_matrix}{\cf1 ,} {\cf5 x_orig}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 to_real}{\cf1 ,} {\cf5 y_orig}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 to_real}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_matrix_rotate} {\cf1 (}{\cf5 a_pango_matrix}{\cf1 ,} {\cf5 a_angle} {\cf1 /} {\cf5 Pi}{\b\cf1 .}{\cf5 truncated_to_real} {\cf1 *} 180{\b\cf1 .}{\cf5 to_real}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_matrix_translate} {\cf1 (}{\cf5 a_pango_matrix}{\cf1 ,} 0{\b\cf1 .}{\cf5 to_real}{\cf1 ,} {\cf1 -} {\cf1 (}{\cf5 y_orig} {\cf1 -} {\cf5 a_y}{\cf1 )}{\b\cf1 .}{\cf5 to_real}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_context_set_matrix} {\cf1 (}{\cf5 a_pango_context}{\cf1 ,} {\cf5 a_pango_matrix}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_renderer_draw_layout} {\cf1 (}{\cf5 l_pango_renderer}{\cf1 ,} {\cf5 a_pango_layout}{\cf1 ,} 0{\cf1 ,} 0{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pango_renderer_set_drawable} {\cf1 (}{\cf5 l_pango_renderer}{\cf1 ,} {\cf5 default_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pango_renderer_set_gc} {\cf1 (}{\cf5 l_pango_renderer}{\cf1 ,} {\cf5 default_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_layout} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} {\cf5 a_x}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_y}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_pango_layout}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 a_width} {\cf1 /=} -1 {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_ellipsize_symbol} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 pango_layout_set_ellipsize_call}{\cf1  }{\cf1 (}{\cf5 l_ellipsize_symbol}{\cf1 ,} {\cf5 a_pango_layout}{\cf1 ,} 0{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 a_clip_area} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 set_clip_area}{\cf1  }{\cf1 (}{\cf5 a_clip_area}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 remove_clipping}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_layout_set_width} {\cf1 (}{\cf5 a_pango_layout}{\cf1 ,} -1{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_layout_set_font_description} {\cf1 (}{\cf5 a_pango_layout}{\cf1 ,} {\cf5 default_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 a_pango_context} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_context_set_matrix} {\cf1 (}{\cf5 a_pango_context}{\cf1 ,} {\cf5 default_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 pango_matrix_free} {\cf1 (}{\cf5 a_pango_matrix}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Pango_layout_set_ellipsize_symbol}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Symbol for }{\cf5 pango_layout_set_ellipsize}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 app_implementation}{\b\cf1 .}{\cf5 symbol_from_symbol_name}{\cf1  }{\cf1 (}"pango_layout_set_ellipsize"{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 pango_layout_set_ellipsize_call} {\cf1 (}{\cf5 a_function}{\cf1 :} {\cf4 POINTER}{\cf1 ;} {\cf5 a_layout}{\cf1 :} {\cf4 POINTER}{\cf1 ;} {\cf5 a_ellipsize_mode}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 external}{\line}
{\tab}{\tab}{\tab}"C inline use <ev_gtk.h>"{\line}
{\tab}{\tab}{\b\cf6 alias}{\line}
{\tab}{\tab}{\tab}"(FUNCTION_CAST(void, (PangoLayout*, gint)) $a_function)((PangoLayout*) $a_layout, (gint) $a_ellipsize_mode);"{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_segment} {\cf1 (}{\cf5 x1}{\cf1 ,} {\cf5 y1}{\cf1 ,} {\cf5 x2}{\cf1 ,} {\cf5 y2}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw line segment from (}{\cf5 x1}{\cf3 , 'y1') to (}{\cf5 x2}{\cf3 , 'y2').}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_line} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} {\cf1 (}{\cf5 x1} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 y1} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 x2} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 y2} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_arc} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_start_angle}{\cf1 ,} {\cf5 an_aperture}{\cf1 :} {\cf4 REAL_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw a part of an ellipse bounded by top left (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ) with}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  size }{\cf5 a_width}{\cf3  and }{\cf5 a_height}{\cf3 .}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Start at }{\cf5 a_start_angle}{\cf3  and stop at }{\cf5 a_start_angle}{\cf3  + }{\cf5 an_aperture}{\cf3 .}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Angles are measured in radians.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 a_radians}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_radians} {\cf1 :=} {\cf5 Radians_to_gdk_angle}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_arc} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} 0{\cf1 ,} {\cf1 (}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 ,} {\cf1 (}{\cf5 a_start_angle} {\cf1 *} {\cf5 a_radians}{\b\cf1 .}{\cf5 to_real} {\cf1 +} 0.5{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer}{\cf1 ,} {\cf1 (}{\cf5 an_aperture} {\cf1 *} {\cf5 a_radians}{\b\cf1 .}{\cf5 to_real} {\cf1 +} 0.5{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_sub_pixel_buffer} {\cf1 (}{\cf5 a_x}{\cf1 ,} {\cf5 a_y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_pixel_buffer}{\cf1 :} {\cf4 EV_PIXEL_BUFFER}{\cf1 ;} {\cf5 area}{\cf1 :} {\cf4 EV_RECTANGLE}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw }{\cf5 area}{\cf3  of }{\cf5 a_pixel_buffer}{\cf3  with upper-left corner on (}{\cf5 a_x}{\cf3 , }{\cf5 a_y}{\cf3 ).}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 a_pixbuf_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_PIXEL_BUFFER_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 l_pixels}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_rowstride}{\cf1 :} {\cf4 NATURAL_32}{\line}
{\tab}{\tab}{\tab}{\cf5 l_back_buffer}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_x}{\cf1 ,} {\cf5 l_y}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf5 l_rect}{\cf1 :} {\cf4 EV_RECTANGLE}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 l_rect} {\cf1 :=} {\cf5 area}{\b\cf1 .}{\cf5 intersection}{\cf1  }{\cf1 (}{\cf5 a_pixel_buffer}{\b\cf1 .}{\cf5 area}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_rect}{\b\cf1 .}{\cf5 width} {\cf1 >} 0 {\b\cf6 and} {\cf5 l_rect}{\b\cf1 .}{\cf5 height} {\cf1 >} 0 {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_x} {\cf1 :=} {\cf5 a_x} {\cf1 +} {\cf5 l_rect}{\b\cf1 .}{\cf5 x} {\cf1 -} {\cf5 area}{\b\cf1 .}{\cf5 x}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_y} {\cf1 :=} {\cf5 a_y} {\cf1 +} {\cf5 l_rect}{\b\cf1 .}{\cf5 y} {\cf1 -} {\cf5 area}{\b\cf1 .}{\cf5 y}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 a_pixbuf_imp} {\cf1 ?=} {\cf5 a_pixel_buffer}{\b\cf1 .}{\cf5 implementation}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 check}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 a_pixbuf_imp} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 supports_pixbuf_alpha} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_pixbuf} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} {\cf5 a_pixbuf_imp}{\b\cf1 .}{\cf5 gdk_pixbuf}{\cf1 ,} {\cf5 l_rect}{\b\cf1 .}{\cf5 x}{\cf1 ,} {\cf5 l_rect}{\b\cf1 .}{\cf5 y}{\cf1 ,} {\cf5 l_x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 ,} {\cf5 l_y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 ,} {\cf5 l_rect}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 l_rect}{\b\cf1 .}{\cf5 height}{\cf1 ,} 0{\cf1 ,} 0{\cf1 ,} 0{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_back_buffer} {\cf1 :=} {\cf5 pixbuf_from_drawable_at_position}{\cf1  }{\cf1 (}{\cf5 l_x}{\cf1 ,} {\cf5 l_y}{\cf1 ,} 0{\cf1 ,} 0{\cf1 ,} {\cf5 l_rect}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 l_rect}{\b\cf1 .}{\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_composite} {\cf1 (}{\cf5 a_pixbuf_imp}{\b\cf1 .}{\cf5 gdk_pixbuf}{\cf1 ,} {\cf5 l_back_buffer}{\cf1 ,} 0{\cf1 ,} 0{\cf1 ,} {\cf5 l_rect}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 l_rect}{\b\cf1 .}{\cf5 height}{\cf1 ,} 0{\b\cf1 .}{\cf5 to_double}{\cf1 ,} 0{\b\cf1 .}{\cf5 to_double}{\cf1 ,} 1{\b\cf1 .}{\cf5 to_double}{\cf1 ,} 1{\b\cf1 .}{\cf5 to_double}{\cf1 ,} 0{\cf1 ,} 255{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_pixels} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_get_pixels} {\cf1 (}{\cf5 l_back_buffer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_rowstride} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_get_rowstride} {\cf1 (}{\cf5 l_back_buffer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_rgb_32_image} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} {\cf5 l_x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 ,} {\cf5 l_y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 ,} {\cf5 l_rect}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 l_rect}{\b\cf1 .}{\cf5 height}{\cf1 ,} 0{\cf1 ,} {\cf5 l_pixels}{\cf1 ,} {\cf5 l_rowstride}{\b\cf1 .}{\cf5 as_integer_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 object_unref} {\cf1 (}{\cf5 l_back_buffer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 supports_pixbuf_alpha}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Does drawable support direct GdkPixbuf alpha blending?}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_pixmap} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_pixmap}{\cf1 :} {\cf4 EV_PIXMAP}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw }{\cf5 a_pixmap}{\cf3  with upper-left corner on (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ).}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 draw_full_pixmap}{\cf1  }{\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 ,} {\cf5 a_pixmap}{\cf1 ,} 0{\cf1 ,} 0{\cf1 ,} {\cf5 a_pixmap}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 a_pixmap}{\b\cf1 .}{\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_full_pixmap} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_pixmap}{\cf1 :} {\cf4 EV_PIXMAP}{\cf1 ;} {\cf5 x_src}{\cf1 ,} {\cf5 y_src}{\cf1 ,} {\cf5 src_width}{\cf1 ,} {\cf5 src_height}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_source_full}{\cf1 ,} {\cf5 l_source_clip}{\cf1 ,} {\cf5 l_source_intersection}{\cf1 :} {\cf4 EV_RECTANGLE}{\line}
{\tab}{\tab}{\tab}{\cf5 l_dest_full}{\cf1 ,} {\cf5 l_dest_clip}{\cf1 ,} {\cf5 l_dest_intersection}{\cf1 :} {\cf4 EV_RECTANGLE}{\line}
{\tab}{\tab}{\tab}{\cf5 pixmap_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_PIXMAP_IMP}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 l_source_full}{\b\cf1 .}{\cf5 make}{\cf1  }{\cf1 (}0{\cf1 ,} 0{\cf1 ,} {\cf5 a_pixmap}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 a_pixmap}{\b\cf1 .}{\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 l_source_clip}{\b\cf1 .}{\cf5 make}{\cf1  }{\cf1 (}{\cf5 x_src}{\cf1 ,} {\cf5 y_src}{\cf1 ,} {\cf5 src_width}{\cf1 ,} {\cf5 src_height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_source_intersection} {\cf1 :=} {\cf5 l_source_full}{\b\cf1 .}{\cf5 intersection}{\cf1  }{\cf1 (}{\cf5 l_source_clip}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_source_intersection}{\b\cf1 .}{\cf5 width} {\cf1 >} 0 {\b\cf6 and then} {\cf5 l_source_intersection}{\b\cf1 .}{\cf5 height} {\cf1 >} 0 {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 l_dest_full}{\b\cf1 .}{\cf5 make}{\cf1  }{\cf1 (}0{\cf1 ,} 0{\cf1 ,} {\cf5 width}{\cf1 ,} {\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\cf5 l_dest_clip}{\b\cf1 .}{\cf5 make}{\cf1  }{\cf1 (}{\cf5 x} {\cf1 +} {\cf5 l_source_intersection}{\b\cf1 .}{\cf5 x} {\cf1 -} {\cf5 l_source_clip}{\b\cf1 .}{\cf5 x}{\cf1 ,} {\cf5 y} {\cf1 +} {\cf5 l_source_intersection}{\b\cf1 .}{\cf5 y} {\cf1 -} {\cf5 l_source_clip}{\b\cf1 .}{\cf5 y}{\cf1 ,} {\cf5 l_source_intersection}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 l_source_intersection}{\b\cf1 .}{\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_source_clip}{\b\cf1 .}{\cf5 move}{\cf1  }{\cf1 (}{\cf5 l_source_intersection}{\b\cf1 .}{\cf5 x}{\cf1 ,} {\cf5 l_source_intersection}{\b\cf1 .}{\cf5 y}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_source_clip}{\b\cf1 .}{\cf5 resize}{\cf1  }{\cf1 (}{\cf5 l_source_intersection}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 l_source_intersection}{\b\cf1 .}{\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_dest_intersection} {\cf1 :=} {\cf5 l_dest_full}{\b\cf1 .}{\cf5 intersection}{\cf1  }{\cf1 (}{\cf5 l_dest_clip}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_dest_intersection}{\b\cf1 .}{\cf5 width} {\cf1 >} 0 {\b\cf6 and then} {\cf5 l_dest_intersection}{\b\cf1 .}{\cf5 height} {\cf1 >} 0 {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_source_clip}{\b\cf1 .}{\cf5 resize}{\cf1  }{\cf1 (}{\cf5 l_dest_intersection}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 l_dest_intersection}{\b\cf1 .}{\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_source_clip}{\b\cf1 .}{\cf5 set_x}{\cf1  }{\cf1 (}{\cf5 l_source_clip}{\b\cf1 .}{\cf5 x} {\cf1 +} {\cf1 (}{\cf5 l_dest_intersection}{\b\cf1 .}{\cf5 x} {\cf1 -} {\cf5 l_dest_clip}{\b\cf1 .}{\cf5 x}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_source_clip}{\b\cf1 .}{\cf5 set_y}{\cf1  }{\cf1 (}{\cf5 l_source_clip}{\b\cf1 .}{\cf5 y} {\cf1 +} {\cf1 (}{\cf5 l_dest_intersection}{\b\cf1 .}{\cf5 y} {\cf1 -} {\cf5 l_dest_clip}{\b\cf1 .}{\cf5 y}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_dest_clip}{\b\cf1 .}{\cf5 move}{\cf1  }{\cf1 (}{\cf5 l_dest_intersection}{\b\cf1 .}{\cf5 x}{\cf1 ,} {\cf5 l_dest_intersection}{\b\cf1 .}{\cf5 y}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_dest_clip}{\b\cf1 .}{\cf5 resize}{\cf1  }{\cf1 (}{\cf5 l_dest_intersection}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 l_dest_intersection}{\b\cf1 .}{\cf5 y}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 pixmap_imp} {\cf1 ?=} {\cf5 a_pixmap}{\b\cf1 .}{\cf5 implementation}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 check}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 pixmap_imp} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 pixmap_imp}{\b\cf1 .}{\cf5 mask} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_clip_mask} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 pixmap_imp}{\b\cf1 .}{\cf5 mask}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_clip_origin} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 l_dest_clip}{\b\cf1 .}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32} {\cf1 -} {\cf5 l_source_clip}{\b\cf1 .}{\cf5 x}{\cf1 ,} {\cf5 l_dest_clip}{\b\cf1 .}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32} {\cf1 -} {\cf5 l_source_clip}{\b\cf1 .}{\cf5 y}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_drawable} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} {\cf5 pixmap_imp}{\b\cf1 .}{\cf5 drawable}{\cf1 ,} {\cf5 l_source_clip}{\b\cf1 .}{\cf5 x}{\cf1 ,} {\cf5 l_source_clip}{\b\cf1 .}{\cf5 y}{\cf1 ,} {\cf5 l_dest_clip}{\b\cf1 .}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 ,} {\cf5 l_dest_clip}{\b\cf1 .}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 ,} {\cf5 l_source_clip}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 l_source_clip}{\b\cf1 .}{\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 pixmap_imp}{\b\cf1 .}{\cf5 mask} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_clip_mask} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 default_pointer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_clip_origin} {\cf1 (}{\cf5 gc}{\cf1 ,} 0{\cf1 ,} 0{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 sub_pixmap} {\cf1 (}{\cf5 area}{\cf1 :} {\cf4 EV_RECTANGLE}{\cf1 )}{\cf1 :} {\cf4 EV_PIXMAP}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Pixmap region of }{\cf5 Current}{\cf3  represented by rectangle }{\cf5 area}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 pix_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_PIXMAP_IMP}{\line}
{\tab}{\tab}{\tab}{\cf5 a_pix}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 create} {\b\cf6 Result}{\line}
{\tab}{\tab}{\tab}{\cf5 pix_imp} {\cf1 ?=} {\b\cf6 Result}{\b\cf1 .}{\cf5 implementation}{\line}
{\tab}{\tab}{\tab}{\b\cf6 check}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 pix_imp} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf5 a_pix} {\cf1 :=} {\cf5 pixbuf_from_drawable_at_position}{\cf1  }{\cf1 (}{\cf5 area}{\b\cf1 .}{\cf5 x}{\cf1 ,} {\cf5 area}{\b\cf1 .}{\cf5 y}{\cf1 ,} 0{\cf1 ,} 0{\cf1 ,} {\cf5 area}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 area}{\b\cf1 .}{\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 pix_imp}{\b\cf1 .}{\cf5 set_pixmap_from_pixbuf}{\cf1  }{\cf1 (}{\cf5 a_pix}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 object_unref} {\cf1 (}{\cf5 a_pix}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_sub_pixmap} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_pixmap}{\cf1 :} {\cf4 EV_PIXMAP}{\cf1 ;} {\cf5 area}{\cf1 :} {\cf4 EV_RECTANGLE}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw }{\cf5 area}{\cf3  of }{\cf5 a_pixmap}{\cf3  with upper-left corner on (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ).}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 draw_full_pixmap}{\cf1  }{\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 ,} {\cf5 a_pixmap}{\cf1 ,} {\cf5 area}{\b\cf1 .}{\cf5 x}{\cf1 ,} {\cf5 area}{\b\cf1 .}{\cf5 y}{\cf1 ,} {\cf5 area}{\b\cf1 .}{\cf5 width}{\cf1 ,} {\cf5 area}{\b\cf1 .}{\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_rectangle} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw rectangle with upper-left corner on (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  with size }{\cf5 a_width}{\cf3  and }{\cf5 a_height}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 a_width} {\cf1 >} 0 {\b\cf6 and then} {\cf5 a_height} {\cf1 >} 0 {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_rectangle} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} 0{\cf1 ,} {\cf1 (}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_width} {\cf1 -} 1{\cf1 ,} {\cf5 a_height} {\cf1 -} 1{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_ellipse} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw an ellipse bounded by top left (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ) with}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  size }{\cf5 a_width}{\cf3  and }{\cf5 a_height}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf1 (}{\cf5 a_width} {\cf1 >} 0 {\b\cf6 and} {\cf5 a_height} {\cf1 >} 0{\cf1 )} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_arc} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} 0{\cf1 ,} {\cf1 (}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 a_width} {\cf1 -} 1{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 a_height} {\cf1 -} 1{\cf1 )}{\cf1 ,} 0{\cf1 ,} {\cf5 Whole_circle}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_polyline} {\cf1 (}{\cf5 points}{\cf1 :} {\cf4 ARRAY} {\cf1 [}{\cf4 EV_COORDINATE}{\cf1 ]}{\cf1 ;} {\cf5 is_closed}{\cf1 :} {\cf4 BOOLEAN}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw line segments between subsequent points in}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  }{\cf5 points}{\cf3 . If }{\cf5 is_closed}{\cf3  draw line segment between first}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  and last point in }{\cf5 points}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 tmp}{\cf1 :} {\cf4 SPECIAL} {\cf1 [}{\cf4 INTEGER_32}{\cf1 ]}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 tmp} {\cf1 :=} {\cf5 coord_array_to_gdkpoint_array}{\cf1  }{\cf1 (}{\cf5 points}{\cf1 )}{\b\cf1 .}{\cf5 area}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 is_closed} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_polygon} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} 0{\cf1 ,} {\cf1 $}{\cf5 tmp}{\b\cf1 .}{\cf5 to_pointer}{\cf1 ,} {\cf5 points}{\b\cf1 .}{\cf5 count}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_lines} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} {\cf1 $}{\cf5 tmp}{\b\cf1 .}{\cf5 to_pointer}{\cf1 ,} {\cf5 points}{\b\cf1 .}{\cf5 count}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_pie_slice} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_start_angle}{\cf1 ,} {\cf5 an_aperture}{\cf1 :} {\cf4 REAL_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw a part of an ellipse bounded by top left (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ) with}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  size }{\cf5 a_width}{\cf3  and }{\cf5 a_height}{\cf3 .}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Start at }{\cf5 a_start_angle}{\cf3  and stop at }{\cf5 a_start_angle}{\cf3  + }{\cf5 an_aperture}{\cf3 .}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  The arc is then closed by two segments through (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ).}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Angles are measured in radians}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 left}{\cf1 ,} {\cf5 top}{\cf1 ,} {\cf5 right}{\cf1 ,} {\cf5 bottom}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf5 x_start_arc}{\cf1 ,} {\cf5 y_start_arc}{\cf1 ,} {\cf5 x_end_arc}{\cf1 ,} {\cf5 y_end_arc}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf5 semi_width}{\cf1 ,} {\cf5 semi_height}{\cf1 :} {\cf4 REAL_32}{\line}
{\tab}{\tab}{\tab}{\cf5 tang_start}{\cf1 ,} {\cf5 tang_end}{\cf1 :} {\cf4 REAL_32}{\line}
{\tab}{\tab}{\tab}{\cf5 x_tmp}{\cf1 ,} {\cf5 y_tmp}{\cf1 :} {\cf4 REAL_32}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 left} {\cf1 :=} {\cf5 x}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 top} {\cf1 :=} {\cf5 y}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 right} {\cf1 :=} {\cf5 left} {\cf1 +} {\cf5 a_width}{\line}
{\tab}{\tab}{\tab}{\cf5 bottom} {\cf1 :=} {\cf5 top} {\cf1 +} {\cf5 a_height}{\line}
{\tab}{\tab}{\tab}{\cf5 semi_width} {\cf1 :=} {\cf1 (}{\cf5 a_width} {\cf1 /} 2{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_real}{\line}
{\tab}{\tab}{\tab}{\cf5 semi_height} {\cf1 :=} {\cf1 (}{\cf5 a_height} {\cf1 /} 2{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_real}{\line}
{\tab}{\tab}{\tab}{\cf5 tang_start} {\cf1 :=} {\cf5 tangent}{\cf1  }{\cf1 (}{\cf5 a_start_angle}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 tang_end} {\cf1 :=} {\cf5 tangent}{\cf1  }{\cf1 (}{\cf5 a_start_angle} {\cf1 +} {\cf5 an_aperture}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 x_tmp} {\cf1 :=} {\cf5 semi_height} {\cf1 /} {\cf1 (}{\cf5 sqrt}{\cf1  }{\cf1 (}{\cf5 tang_start} {\cf1 *} {\cf5 tang_start} {\cf1 +} {\cf1 (}{\cf5 semi_height} {\cf1 *} {\cf5 semi_height}{\cf1 )} {\cf1 /} {\cf1 (}{\cf5 semi_width} {\cf1 *} {\cf5 semi_width}{\cf1 )}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 y_tmp} {\cf1 :=} {\cf5 semi_height} {\cf1 /} {\cf1 (}{\cf5 sqrt}{\cf1  }{\cf1 (}1{\b\cf1 .}{\cf5 to_real} {\cf1 +} {\cf1 (}{\cf5 semi_height} {\cf1 *} {\cf5 semi_height}{\cf1 )} {\cf1 /} {\cf1 (}{\cf5 semi_width} {\cf1 *} {\cf5 semi_width} {\cf1 *} {\cf5 tang_start} {\cf1 *} {\cf5 tang_start}{\cf1 )}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 sine}{\cf1  }{\cf1 (}{\cf5 a_start_angle}{\cf1 )} {\cf1 >} 0{\b\cf1 .}{\cf5 to_real} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 y_tmp} {\cf1 :=} {\cf1 -} {\cf5 y_tmp}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 cosine}{\cf1  }{\cf1 (}{\cf5 a_start_angle}{\cf1 )} {\cf1 <} 0{\b\cf1 .}{\cf5 to_real} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 x_tmp} {\cf1 :=} {\cf1 -} {\cf5 x_tmp}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf5 x_start_arc} {\cf1 :=} {\cf1 (}{\cf5 x_tmp} {\cf1 +} {\cf5 left}{\b\cf1 .}{\cf5 to_real} {\cf1 +} {\cf5 semi_width}{\cf1 )}{\b\cf1 .}{\cf5 rounded}{\line}
{\tab}{\tab}{\tab}{\cf5 y_start_arc} {\cf1 :=} {\cf1 (}{\cf5 y_tmp} {\cf1 +} {\cf5 top}{\b\cf1 .}{\cf5 to_real} {\cf1 +} {\cf5 semi_height}{\cf1 )}{\b\cf1 .}{\cf5 rounded}{\line}
{\tab}{\tab}{\tab}{\cf5 x_tmp} {\cf1 :=} {\cf5 semi_height} {\cf1 /} {\cf1 (}{\cf5 sqrt}{\cf1  }{\cf1 (}{\cf5 tang_end} {\cf1 *} {\cf5 tang_end} {\cf1 +} {\cf1 (}{\cf5 semi_height} {\cf1 *} {\cf5 semi_height}{\cf1 )} {\cf1 /} {\cf1 (}{\cf5 semi_width} {\cf1 *} {\cf5 semi_width}{\cf1 )}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 y_tmp} {\cf1 :=} {\cf5 semi_height} {\cf1 /} {\cf1 (}{\cf5 sqrt}{\cf1  }{\cf1 (}1{\b\cf1 .}{\cf5 to_real} {\cf1 +} {\cf1 (}{\cf5 semi_height} {\cf1 *} {\cf5 semi_height}{\cf1 )} {\cf1 /} {\cf1 (}{\cf5 semi_width} {\cf1 *} {\cf5 semi_width} {\cf1 *} {\cf5 tang_end} {\cf1 *} {\cf5 tang_end}{\cf1 )}{\cf1 )}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 sine}{\cf1  }{\cf1 (}{\cf5 a_start_angle} {\cf1 +} {\cf5 an_aperture}{\cf1 )} {\cf1 >} 0{\b\cf1 .}{\cf5 to_real} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 y_tmp} {\cf1 :=} {\cf1 -} {\cf5 y_tmp}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 cosine}{\cf1  }{\cf1 (}{\cf5 a_start_angle} {\cf1 +} {\cf5 an_aperture}{\cf1 )} {\cf1 <} 0{\b\cf1 .}{\cf5 to_real} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 x_tmp} {\cf1 :=} {\cf1 -} {\cf5 x_tmp}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\cf5 x_end_arc} {\cf1 :=} {\cf1 (}{\cf5 x_tmp} {\cf1 +} {\cf5 left}{\b\cf1 .}{\cf5 to_real} {\cf1 +} {\cf5 semi_width}{\cf1 )}{\b\cf1 .}{\cf5 rounded}{\line}
{\tab}{\tab}{\tab}{\cf5 y_end_arc} {\cf1 :=} {\cf1 (}{\cf5 y_tmp} {\cf1 +} {\cf5 top}{\b\cf1 .}{\cf5 to_real} {\cf1 +} {\cf5 semi_height}{\cf1 )}{\b\cf1 .}{\cf5 rounded}{\line}
{\tab}{\tab}{\tab}{\cf5 draw_arc}{\cf1  }{\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 ,} {\cf5 a_start_angle}{\cf1 ,} {\cf5 an_aperture}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 draw_segment}{\cf1  }{\cf1 (}{\cf5 x} {\cf1 +} {\cf1 (}{\cf5 a_width} {\cf1 //} 2{\cf1 )}{\cf1 ,} {\cf5 y} {\cf1 +} {\cf1 (}{\cf5 a_height} {\cf1 //} 2{\cf1 )}{\cf1 ,} {\cf5 x_start_arc}{\cf1 ,} {\cf5 y_start_arc}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 draw_segment}{\cf1  }{\cf1 (}{\cf5 x} {\cf1 +} {\cf1 (}{\cf5 a_width} {\cf1 //} 2{\cf1 )}{\cf1 ,} {\cf5 y} {\cf1 +} {\cf1 (}{\cf5 a_height} {\cf1 //} 2{\cf1 )}{\cf1 ,} {\cf5 x_end_arc}{\cf1 ,} {\cf5 y_end_arc}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf3 --}{\cf3  filling operations}{\line}
{\line}
{\tab}{\cf5 {\cf5 fill_rectangle} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw rectangle with upper-left corner on (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  with size }{\cf5 a_width}{\cf3  and }{\cf5 a_height}{\cf3 . Fill with }{\cf5 background_color}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 tile} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_fill} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_tiled_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_rectangle} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} 1{\cf1 ,} {\cf1 (}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_fill} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_solid_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 fill_ellipse} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw an ellipse bounded by top left (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ) with}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  size }{\cf5 a_width}{\cf3  and }{\cf5 a_height}{\cf3 .}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Fill with }{\cf5 background_color}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 tile} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_fill} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_tiled_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_arc} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} 1{\cf1 ,} {\cf1 (}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 ,} 0{\cf1 ,} {\cf5 Whole_circle}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_fill} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_solid_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 fill_polygon} {\cf1 (}{\cf5 points}{\cf1 :} {\cf4 ARRAY} {\cf1 [}{\cf4 EV_COORDINATE}{\cf1 ]}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw line segments between subsequent points in }{\cf5 points}{\cf3 .}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Fill all enclosed area's with }{\cf5 background_color}{\cf3 .}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 tmp}{\cf1 :} {\cf4 SPECIAL} {\cf1 [}{\cf4 INTEGER_32}{\cf1 ]}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 tmp} {\cf1 :=} {\cf5 coord_array_to_gdkpoint_array}{\cf1  }{\cf1 (}{\cf5 points}{\cf1 )}{\b\cf1 .}{\cf5 area}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 tile} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_fill} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_tiled_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_polygon} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} 1{\cf1 ,} {\cf1 $}{\cf5 tmp}{\b\cf1 .}{\cf5 to_pointer}{\cf1 ,} {\cf5 points}{\b\cf1 .}{\cf5 count}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_fill} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_solid_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 fill_pie_slice} {\cf1 (}{\cf5 x}{\cf1 ,} {\cf5 y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 :} {\cf4 INTEGER_32}{\cf1 ;} {\cf5 a_start_angle}{\cf1 ,} {\cf5 an_aperture}{\cf1 :} {\cf4 REAL_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Draw a part of an ellipse bounded by top left (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ) with}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  size }{\cf5 a_width}{\cf3  and }{\cf5 a_height}{\cf3 .}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Start at }{\cf5 a_start_angle}{\cf3  and stop at }{\cf5 a_start_angle}{\cf3  + }{\cf5 an_aperture}{\cf3 .}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  The arc is then closed by two segments through (}{\cf5 x}{\cf3 , }{\cf5 y}{\cf3 ).}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Angles are measured in radians.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 drawable} {\cf1 /=} {\cf5 default_pointer} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 tile} {\cf1 /=} {\b\cf6 Void} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_fill} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_tiled_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_draw_arc} {\cf1 (}{\cf5 drawable}{\cf1 ,} {\cf5 gc}{\cf1 ,} 1{\cf1 ,} {\cf1 (}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf1 (}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 max}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 min_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\b\cf1 .}{\cf5 min}{\cf1  }{\cf1 (}{\cf1 \{}{\cf4 INTEGER_16}{\cf1 \}}{\b\cf1 .}{\cf5 max_value}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 )}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 ,} {\cf1 (}{\cf5 a_start_angle} {\cf1 *} {\cf5 Radians_to_gdk_angle}{\b\cf1 .}{\cf5 to_real}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer}{\cf1 ,} {\cf1 (}{\cf5 an_aperture} {\cf1 *} {\cf5 Radians_to_gdk_angle}{\b\cf1 .}{\cf5 to_real}{\cf1 )}{\b\cf1 .}{\cf5 truncated_to_integer}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_fill} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_solid_enum}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}NONE{\cf1 \}} {\cf3 --}{\cf3  Implemention}{\line}
{\line}
{\tab}{\cf5 {\cf5 coord_array_to_gdkpoint_array} {\cf1 (}{\cf5 pts}{\cf1 :} {\cf4 ARRAY} {\cf1 [}{\cf4 EV_COORDINATE}{\cf1 ]}{\cf1 )}{\cf1 :} {\cf4 ARRAY} {\cf1 [}{\cf4 INTEGER_32}{\cf1 ]}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Low-level conversion.}{\line}
{\tab}{\tab}{\b\cf6 require}{\line}
{\tab}{\tab}{\tab}{\cf1 pts_exists}{\cf1 :} {\cf5 pts} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 i}{\cf1 ,} {\cf5 j}{\cf1 ,} {\cf5 array_count}{\cf1 :} {\cf4 INTEGER_32}{\line}
{\tab}{\tab}{\tab}{\cf5 l_area}{\cf1 :} {\cf4 SPECIAL} {\cf1 [}{\cf4 INTEGER_32}{\cf1 ]}{\line}
{\tab}{\tab}{\tab}{\cf5 l_coord_area}{\cf1 :} {\cf4 SPECIAL} {\cf1 [}{\cf4 EV_COORDINATE}{\cf1 ]}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 from}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 array_count} {\cf1 :=} {\cf5 pts}{\b\cf1 .}{\cf5 count}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 create} {\b\cf6 Result}{\b\cf1 .}{\cf5 make_filled}{\cf1  }{\cf1 (}0{\cf1 ,} 1{\cf1 ,} {\cf5 array_count} {\cf1 *} 2{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_coord_area} {\cf1 :=} {\cf5 pts}{\b\cf1 .}{\cf5 area}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_area} {\cf1 :=} {\b\cf6 Result}{\b\cf1 .}{\cf5 area}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 i} {\cf1 :=} {\cf5 array_count} {\cf1 -} 1{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 j} {\cf1 :=} {\cf5 array_count} {\cf1 *} 2 {\cf1 -} 1{\line}
{\tab}{\tab}{\tab}{\b\cf6 until}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 i} {\cf1 <} 0{\line}
{\tab}{\tab}{\tab}{\b\cf6 loop}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_area} {\cf1 [}{\cf5 j}{\cf1 ]} {\cf1 :=} {\cf1 (}{\cf5 l_coord_area} {\cf1 @} {\cf5 i}{\cf1 )}{\b\cf1 .}{\cf5 y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 j} {\cf1 :=} {\cf5 j} {\cf1 -} 1{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_area} {\cf1 [}{\cf5 j}{\cf1 ]} {\cf1 :=} {\cf1 (}{\cf5 l_coord_area} {\cf1 @} {\cf5 i}{\cf1 )}{\b\cf1 .}{\cf5 x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 i} {\cf1 :=} {\cf5 i} {\cf1 -} 1{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 j} {\cf1 :=} {\cf5 j} {\cf1 -} 1{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 ensure}{\line}
{\tab}{\tab}{\tab}{\cf1 result_exists}{\cf1 :} {\b\cf6 Result} {\cf1 /=} {\b\cf6 Void}{\line}
{\tab}{\tab}{\tab}{\cf1 same_size}{\cf1 :} {\cf5 pts}{\b\cf1 .}{\cf5 count}{\b\cf1 .}{\cf5 to_double} {\cf1 =} {\b\cf6 Result}{\b\cf1 .}{\cf5 count} {\cf1 /} 2{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}{\cf4 EV_GTK_DEPENDENT_APPLICATION_IMP}{\cf1 ,} {\cf4 EV_ANY_I}{\cf1 \}} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 pixbuf_from_drawable}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Return a GdkPixbuf object from the current Gdkpixbuf structure}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf5 pixbuf_from_drawable_at_position}{\cf1  }{\cf1 (}0{\cf1 ,} 0{\cf1 ,} 0{\cf1 ,} 0{\cf1 ,} {\cf5 width}{\cf1 ,} {\cf5 height}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 pixbuf_from_drawable_at_position} {\cf1 (}{\cf5 src_x}{\cf1 ,} {\cf5 src_y}{\cf1 ,} {\cf5 dest_x}{\cf1 ,} {\cf5 dest_y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Return a GdkPixbuf object from the current Gdkpixbuf structure}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_mask_pix}{\cf1 ,} {\cf5 l_temp_pix}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf5 l_null}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_get_from_drawable} {\cf1 (}{\cf5 l_null}{\cf1 ,} {\cf5 drawable}{\cf1 ,} {\cf5 l_null}{\cf1 ,} {\cf5 src_x} {\cf1 +} {\cf5 device_x_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 ,} {\cf5 src_y} {\cf1 +} {\cf5 device_y_offset}{\b\cf1 .}{\cf5 to_integer_32}{\cf1 ,} {\cf5 dest_x}{\cf1 ,} {\cf5 dest_y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\b\cf6 Result} {\cf1 =} {\cf5 l_null} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_new} {\cf1 (}0{\cf1 ,} {\b\cf6 True}{\cf1 ,} 8{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 elseif} {\cf5 mask} {\cf1 /=} {\cf5 l_null} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf5 l_mask_pix} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_get_from_drawable} {\cf1 (}{\cf5 l_null}{\cf1 ,} {\cf5 mask}{\cf1 ,} {\cf5 l_null}{\cf1 ,} {\cf5 src_x}{\cf1 ,} {\cf5 src_y}{\cf1 ,} {\cf5 dest_x}{\cf1 ,} {\cf5 dest_y}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 l_mask_pix} {\cf1 /=} {\cf5 l_null} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_temp_pix} {\cf1 :=} {\cf5 l_mask_pix}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_mask_pix} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_add_alpha} {\cf1 (}{\cf5 l_mask_pix}{\cf1 ,} {\b\cf6 True}{\cf1 ,} 255{\cf1 ,} 255{\cf1 ,} 255{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 object_unref} {\cf1 (}{\cf5 l_temp_pix}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 l_temp_pix} {\cf1 :=} {\b\cf6 Result}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_add_alpha} {\cf1 (}{\b\cf6 Result}{\cf1 ,} {\b\cf6 False}{\cf1 ,} 0{\cf1 ,} 0{\cf1 ,} 0{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 object_unref} {\cf1 (}{\cf5 l_temp_pix}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_composite} {\cf1 (}{\cf5 l_mask_pix}{\cf1 ,} {\b\cf6 Result}{\cf1 ,} 0{\cf1 ,} 0{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 ,} 0.0{\cf1 ,} 0.0{\cf1 ,} 1.0{\cf1 ,} 1.0{\cf1 ,} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_interp_bilinear}{\cf1 ,} 255{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf5 draw_mask_on_pixbuf}{\cf1  }{\cf1 (}{\b\cf6 Result}{\cf1 ,} {\cf5 l_mask_pix}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 object_unref} {\cf1 (}{\cf5 l_mask_pix}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 pixbuf_from_drawable_with_size} {\cf1 (}{\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Return a GdkPixbuf object from the current Gdkpixbuf structure with dimensions }{\cf5 a_width}{\cf3  * }{\cf5 a_height}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 a_pixbuf}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 a_pixbuf} {\cf1 :=} {\cf5 pixbuf_from_drawable}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_scale_simple} {\cf1 (}{\cf5 a_pixbuf}{\cf1 ,} {\cf5 a_width}{\cf1 ,} {\cf5 a_height}{\cf1 ,} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_interp_bilinear}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 object_unref} {\cf1 (}{\cf5 a_pixbuf}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}NONE{\cf1 \}} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 device_x_offset}{\cf1 :} {\cf4 INTEGER_16}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Number of pixels to offset the x coord to get correct device placement}{\line}
{\line}
{\tab}{\cf5 {\cf5 device_y_offset}{\cf1 :} {\cf4 INTEGER_16}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Number of pixels to offset to y coord to get correct device placement.}{\line}
{\line}
{\tab}{\cf5 {\cf5 internal_set_color} {\cf1 (}{\cf5 a_foreground}{\cf1 :} {\cf4 BOOLEAN}{\cf1 ;} {\cf5 a_red}{\cf1 ,} {\cf5 a_green}{\cf1 ,} {\cf5 a_blue}{\cf1 :} {\cf4 INTEGER_32}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set }{\cf5 gc}{\cf3  color to (a_red, a_green, a_blue), }{\cf5 a_foreground}{\cf3  sets foreground color, otherwise background is set.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 l_color_struct}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\cf5 l_color_struct} {\cf1 :=} {\cf5 app_implementation}{\b\cf1 .}{\cf5 Reusable_color_struct}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_color_struct_red} {\cf1 (}{\cf5 l_color_struct}{\cf1 ,} {\cf5 a_red}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_color_struct_green} {\cf1 (}{\cf5 l_color_struct}{\cf1 ,} {\cf5 a_green}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_color_struct_blue} {\cf1 (}{\cf5 l_color_struct}{\cf1 ,} {\cf5 a_blue}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 if} {\cf5 a_foreground} {\b\cf6 then}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_rgb_fg_color} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 l_color_struct}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 else}{\line}
{\tab}{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_gc_set_rgb_bg_color} {\cf1 (}{\cf5 gc}{\cf1 ,} {\cf5 l_color_struct}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\b\cf6 end}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Fg_color}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default allocated background color.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 a_success}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 c_gdk_color_struct_allocate}{\line}
{\tab}{\tab}{\tab}{\cf5 a_success} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_colormap_alloc_color} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_rgb_colormap} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_default}{\cf1 )}{\cf1 ,} {\b\cf6 Result}{\cf1 ,} {\b\cf6 False}{\cf1 ,} {\b\cf6 True}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Bg_color}{\cf1 :} {\cf4 POINTER}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default allocate foreground color.}{\line}
{\tab}{\tab}{\b\cf6 local}{\line}
{\tab}{\tab}{\tab}{\cf5 a_success}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\b\cf6 once}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 c_gdk_color_struct_allocate}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_color_struct_red} {\cf1 (}{\b\cf6 Result}{\cf1 ,} 65535{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_color_struct_green} {\cf1 (}{\b\cf6 Result}{\cf1 ,} 65535{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 set_gdk_color_struct_blue} {\cf1 (}{\b\cf6 Result}{\cf1 ,} 65535{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf5 a_success} {\cf1 :=} {\cf1 \{}{\cf4 GTK}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_colormap_alloc_color} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_rgb_colormap} {\cf1 (}{\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_screen_get_default}{\cf1 )}{\cf1 ,} {\b\cf6 Result}{\cf1 ,} {\b\cf6 False}{\cf1 ,} {\b\cf6 True}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 draw_mask_on_pixbuf} {\cf1 (}{\cf5 a_pixbuf_ptr}{\cf1 ,} {\cf5 a_mask_ptr}{\cf1 :} {\cf4 POINTER}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 require}{\line}
{\tab}{\tab}{\tab}{\cf1 a_pixbuf_ptr_has_alpha}{\cf1 :} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_get_has_alpha} {\cf1 (}{\cf5 a_pixbuf_ptr}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf1 a_mask_ptr_has_alpha}{\cf1 :} {\cf1 \{}{\cf4 GTK2}{\cf1 \}}{\b\cf1 .}{\cf5 gdk_pixbuf_get_has_alpha} {\cf1 (}{\cf5 a_mask_ptr}{\cf1 )}{\line}
{\tab}{\tab}{\b\cf6 external}{\line}
{\tab}{\tab}{\tab}"C inline use <ev_gtk.h>"{\line}
{\tab}{\tab}{\b\cf6 alias}{\line}
{\tab}{\tab}{\tab}"[{\line}
{\tab}{\tab}{\tab}{\tab}\{{\line}
{\tab}{\tab}{\tab}{\tab}	guint32 x, y;{\line}
{\tab}{\tab}{\tab}{\tab}	guint32 l_pix_height,l_pix_width;{\line}
{\tab}{\tab}{\tab}{\tab}	guint32 l_pix_row_stride;{\line}
{\tab}{\tab}{\tab}{\tab}	guint32 l_mask_row_stride;{\line}
{\tab}{\tab}{\tab}{\tab}	GdkPixbuf *pixbuf, *mask;{\line}
{\tab}{\tab}{\tab}{\tab}	guchar *l_mask_pixels, *l_pixbuf_pixels;{\line}
{\tab}{\tab}{\tab}{\tab}	pixbuf = (GdkPixbuf*) arg1;{\line}
{\tab}{\tab}{\tab}{\tab}	mask = (GdkPixbuf*) arg2;{\line}
{\tab}{\tab}{\tab}{\tab}	l_pix_height = gdk_pixbuf_get_height (pixbuf);{\line}
{\tab}{\tab}{\tab}{\tab}	l_pix_width = gdk_pixbuf_get_width (pixbuf);{\line}
{\tab}{\tab}{\tab}{\tab}	l_pix_row_stride = gdk_pixbuf_get_rowstride(pixbuf);{\line}
{\tab}{\tab}{\tab}{\tab}	l_mask_row_stride = gdk_pixbuf_get_rowstride(mask);{\line}
{\tab}{\tab}{\tab}{\tab}	l_mask_pixels = gdk_pixbuf_get_pixels (mask);{\line}
{\tab}{\tab}{\tab}{\tab}	l_pixbuf_pixels = gdk_pixbuf_get_pixels (pixbuf);{\line}
{\tab}{\tab}{\tab}{\tab}	for (y = 0; y < l_pix_height; y++) \{{\line}
{\tab}{\tab}{\tab}{\tab}		guchar *src, *dest;{\line}
{\tab}{\tab}{\tab}{\tab}		src = (l_mask_pixels + (y * l_mask_row_stride));{\line}
{\tab}{\tab}{\tab}{\tab}		dest = (l_pixbuf_pixels + (y * l_pix_row_stride));{\line}
{\tab}{\tab}{\tab}{\tab}		for (x = 0; x < l_pix_width; x++) \{{\line}
{\tab}{\tab}{\tab}{\tab}			if (src [0] == (guchar)0) \{{\line}
{\tab}{\tab}{\tab}{\tab}				dest [3] = (guchar)0;{\line}
{\tab}{\tab}{\tab}{\tab}			\}{\line}
{\tab}{\tab}{\tab}{\tab}			src += 4;{\line}
{\tab}{\tab}{\tab}{\tab}			dest += 4;{\line}
{\tab}{\tab}{\tab}{\tab}		\}{\line}
{\tab}{\tab}{\tab}{\tab}	\}{\line}
{\tab}{\tab}{\tab}{\tab}\}{\line}
{\tab}{\tab}{\tab}]"{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 app_implementation}{\cf1 :} {\cf4 EV_APPLICATION_IMP}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Return the instance of EV_APPLICATION_IMP.}{\line}
{\tab}{\tab}{\b\cf6 deferred}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 internal_foreground_color}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_COLOR}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Color used to draw primitives.}{\line}
{\line}
{\tab}{\cf5 {\cf5 internal_background_color}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_COLOR}}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Color used for erasing of canvas.}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Default: white.}{\line}
{\line}
{\tab}{\cf5 {\cf5 corruptable_onscreen}{\cf1 :} {\cf4 BOOLEAN}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Is pixel data corruptable if displayed on screen.}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  True if drawing area or screen.}{\line}
{\tab}{\tab}{\b\cf6 do}{\line}
{\tab}{\tab}{\tab}{\b\cf6 Result} {\cf1 :=} {\b\cf6 True}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 flush}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Force all queued expose events to be called.}{\line}
{\tab}{\tab}{\b\cf6 deferred}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 update_if_needed}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Force update of }{\cf5 Current}{\cf3  if needed}{\line}
{\tab}{\tab}{\b\cf6 deferred}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 Whole_circle}{\cf1 :} {\cf4 INTEGER_32} {\cf1 =} 23040}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Number of 1/64 th degrees in a full circle (360 * 64)}{\line}
{\line}
{\tab}{\cf5 {\cf5 Radians_to_gdk_angle}{\cf1 :} {\cf4 INTEGER_32} {\cf1 =} 3667}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Multiply radian by this to get no of (1/64) degree segments.}{\line}
{\line}
{\tab}{\cf5 {\cf5 internal_font_imp}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_FONT_IMP}{\line}
{\tab}{\tab}{\b\cf6 note}{\line}
{\tab}{\tab}{\tab}option: stable{\line}
{\tab}{\tab}{\b\cf6 attribute}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 gdk_gc_unref} {\cf1 (}{\cf5 a_gc}{\cf1 :} {\cf4 POINTER}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  void   gdk_gc_unref		  (GdkGC	    *gc);}{\line}
{\tab}{\tab}{\b\cf6 external}{\line}
{\tab}{\tab}{\tab}"C (GdkGC*) | <ev_gtk.h>"{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\line}
{\tab}{\cf5 {\cf5 set_dashes_pattern} {\cf1 (}{\cf5 a_gc}{\cf1 ,} {\cf5 dash_pattern}{\cf1 :} {\cf4 POINTER}{\cf1 )}{\line}
{\tab}{\tab}{\tab}{\cf3 --}{\cf3  Set the dashes pattern for gc }{\cf5 a_gc}{\cf3 , }{\cf5 dash_pattern}{\cf3  is a pointer to a two count gint8}{\cf3 []]}{\cf3  denoting the pattern.}{\line}
{\tab}{\tab}{\b\cf6 external}{\line}
{\tab}{\tab}{\tab}"C inline use <ev_gtk.h>"{\line}
{\tab}{\tab}{\b\cf6 alias}{\line}
{\tab}{\tab}{\tab}"gdk_gc_set_dashes ((GdkGC*) $a_gc, 0, (gint8*) $dash_pattern, 2)"{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 feature} {\cf1 \{}{\cf4 EV_ANY}{\cf1 ,} {\cf4 EV_ANY_I}{\cf1 \}} {\cf3 --}{\cf3  Implementation}{\line}
{\line}
{\tab}{\cf5 {\cf5 interface}{\cf1 :} {\b\cf6 detachable} {\cf4 EV_DRAWABLE}{\line}
{\tab}{\tab}{\b\cf6 note}{\line}
{\tab}{\tab}{\tab}option: stable{\line}
{\tab}{\tab}{\b\cf6 attribute}{\line}
{\tab}{\tab}{\b\cf6 end}}{\line}
{\tab}{\line}
{\b\cf6 invariant}{\line}
{\tab}{\cf1 gc_not_void}{\cf1 :} {\cf5 is_usable} {\b\cf6 implies} {\cf5 gc} {\cf1 /=} {\cf5 default_pointer}{\line}
{\line}
{\b\cf6 note}{\line}
{\tab}{\cf1 copyright}{\cf1 :} "Copyright (c) 1984-2014, Eiffel Software and others"{\line}
{\tab}{\cf1 license}{\cf1 :} "Eiffel Forum License v2 (see http://www.eiffel.com/licensing/forum.txt)"{\line}
{\tab}{\cf1 source}{\cf1 :} "[{\line}
{\tab}{\tab}Eiffel Software{\line}
{\tab}{\tab}5949 Hollister Ave., Goleta, CA 93117 USA{\line}
{\tab}{\tab}Telephone 805-685-1006, Fax 805-685-6869{\line}
{\tab}{\tab}Website http://www.eiffel.com{\line}
{\tab}{\tab}Customer support http://support.eiffel.com{\line}
{\tab}]"{\line}
{\line}
{\b\cf6 end} {\cf3 --} {\cf3 class }{\cf4 EV_DRAWABLE_IMP}}
{\line}
{\cf3 {\tab}{\tab}{\tab}-- Generated by ISE Eiffel --}
{\line}
{\cf3{\tab}{\tab}{\tab}-- For more details: http://www.eiffel.com --}
}}
{\line}
