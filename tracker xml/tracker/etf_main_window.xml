<system>
<keyword>note</keyword>
	<indexing_tag>description</indexing_tag><symbol>:</symbol> <string>&quot;Main window of ETF project.&quot;</string>
	<indexing_tag>generator</indexing_tag><symbol>:</symbol> <string>&quot;EiffelBuild&quot;</string>
	<indexing_tag>date</indexing_tag><symbol>:</symbol> <string>&quot;$Date: 2010-12-22 10:39:24 -0800 (Wed, 22 Dec 2010) $&quot;</string>
	<indexing_tag>revision</indexing_tag><symbol>:</symbol> <string>&quot;$Revision: 85202 $&quot;</string>

<keyword>class</keyword> 
	<class><location>../tracker/etf_main_window.xml</location>ETF_MAIN_WINDOW</class>

<keyword>inherit</keyword>
	<class><location>../tracker/etf_main_window_imp.xml</location>ETF_MAIN_WINDOW_IMP</class>
		<keyword>rename</keyword>
			<feature><location>../interface/ev_titled_window.xml#f_raise</location>raise</feature> <keyword>as</keyword> <feature><location>../interface/ev_titled_window.xml#f_raise</location>main_window_raise</feature>
		<keyword>end</keyword>

	<class><include>False</include>EXCEPTIONS</class>
		<keyword>rename</keyword>
			<feature><include>False</include>raise</feature> <keyword>as</keyword> <feature><include>False</include>exceptions_raise</feature>
		<keyword>undefine</keyword>
			<feature><location>../interface/ev_any.xml#f_default_create</location>default_create</feature><symbol>,</symbol>
			<feature><location>../interface/ev_any.xml#f_copy</location>copy</feature>
		<keyword>end</keyword>

<keyword>create</keyword> 
	<feature><location>../interface/ev_any.xml#f_default_create</location>default_create</feature>

<keyword>feature</keyword> <symbol>{</symbol>NONE<symbol>}</symbol> <comment>--</comment><comment> Initialization</comment>

	<anchor>f_user_create_interface_objects</anchor><feature><location>../tracker/etf_main_window.xml#f_user_create_interface_objects</location>user_create_interface_objects</feature>
			<comment>--</comment><comment> Create any auxilliary objects needed for MAIN_WINDOW.</comment>
			<comment>--</comment><comment> Initialization for these objects must be performed in </comment><feature><location>../tracker/etf_main_window.xml#f_user_initialization</location>user_initialization</feature><comment>.</comment>
		<keyword>do</keyword>
			<keyword>create</keyword> <feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_make</location>make</feature>
			<keyword>create</keyword> <feature><location>../tracker/etf_main_window.xml#f_session_file</location>session_file</feature><dot>.</dot><feature><include>False</include>make_with_name</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_main_window.xml#f_session_file_path</location>Session_file_path</feature><symbol>)</symbol>
			<feature><location>../tracker/etf_main_window_imp.xml#f_output</location>output</feature><dot>.</dot><feature><location>../interface/ev_text_component.xml#f_insert_text</location>insert_text</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_model</location>model</feature><dot>.</dot><feature><location>../tracker/tracker.xml#f_out</location>out</feature><symbol>)</symbol>
			<feature><location>../tracker/etf_main_window_imp.xml#f_status</location>status</feature><dot>.</dot><feature><location>../interface/ev_text_component.xml#f_insert_text</location>insert_text</feature><symbol> </symbol><symbol>(</symbol>&quot;List of commands: %N&quot;<symbol>)</symbol>
			<feature><location>../tracker/etf_main_window_imp.xml#f_status</location>status</feature><dot>.</dot><feature><location>../interface/ev_text_component.xml#f_insert_text</location>insert_text</feature><symbol> </symbol><symbol>(</symbol>&quot;================= %N&quot;<symbol>)</symbol>
			<feature><location>../tracker/etf_main_window_imp.xml#f_status</location>status</feature><dot>.</dot><feature><location>../interface/ev_text_component.xml#f_insert_text</location>insert_text</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_man_page</location>Man_page</feature><symbol>)</symbol>
		<keyword>end</keyword>

	<anchor>f_user_initialization</anchor><feature><location>../tracker/etf_main_window.xml#f_user_initialization</location>user_initialization</feature>
			<comment>--</comment><comment> Perform any initialization on objects created by </comment><feature><location>../tracker/etf_main_window.xml#f_user_create_interface_objects</location>user_create_interface_objects</feature>
			<comment>--</comment><comment> and from within current class itself.</comment>
		<keyword>do</keyword>
		<keyword>end</keyword>
	
<keyword>feature</keyword> <symbol>{</symbol>NONE<symbol>}</symbol> <comment>--</comment><comment> Business Object</comment>

	<anchor>f_business_obj</anchor><feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><symbol>:</symbol> <class><location>../tracker/etf_model_facade.xml</location>ETF_MODEL_FACADE</class>

	<anchor>f_session_file</anchor><feature><location>../tracker/etf_main_window.xml#f_session_file</location>session_file</feature><symbol>:</symbol> <class><include>False</include>PLAIN_TEXT_FILE</class>

	<anchor>f_session_file_path</anchor><feature><location>../tracker/etf_main_window.xml#f_session_file_path</location>Session_file_path</feature><symbol>:</symbol> <class><include>False</include>STRING_8</class> <symbol>=</symbol> &quot;./session.txt&quot;
	
<keyword>feature</keyword> <symbol>{</symbol>NONE<symbol>}</symbol> <comment>--</comment><comment> Auxiliary Commands</comment>

	<anchor>f_clear_display</anchor><feature><location>../tracker/etf_main_window.xml#f_clear_display</location>clear_display</feature>
		<keyword>do</keyword>
			<feature><location>../tracker/etf_main_window_imp.xml#f_output</location>output</feature><dot>.</dot><feature><location>../interface/ev_textable.xml#f_set_text</location>set_text</feature><symbol> </symbol><symbol>(</symbol>&quot;&quot;<symbol>)</symbol>
			<feature><location>../tracker/etf_main_window_imp.xml#f_status</location>status</feature><dot>.</dot><feature><location>../interface/ev_textable.xml#f_set_text</location>set_text</feature><symbol> </symbol><symbol>(</symbol>&quot;&quot;<symbol>)</symbol>
			<feature><location>../tracker/etf_main_window_imp.xml#f_command</location>command</feature><dot>.</dot><feature><location>../interface/ev_textable.xml#f_set_text</location>set_text</feature><symbol> </symbol><symbol>(</symbol>&quot;&quot;<symbol>)</symbol>
			<feature><location>../tracker/etf_main_window_imp.xml#f_history</location>history</feature><dot>.</dot><feature><location>../interface/ev_textable.xml#f_set_text</location>set_text</feature><symbol> </symbol><symbol>(</symbol>&quot;&quot;<symbol>)</symbol>
		<keyword>end</keyword>

	<anchor>f_display_history</anchor><feature><location>../tracker/etf_main_window.xml#f_display_history</location>display_history</feature> <symbol>(</symbol><local>trace</local><symbol>:</symbol> <class><include>False</include>LIST</class> <symbol>[</symbol><class><include>False</include>STRING_8</class><symbol>]</symbol><symbol>)</symbol>
		<keyword>local</keyword>
			<local>i</local><symbol>:</symbol> <class><include>False</include>INTEGER_32</class>
		<keyword>do</keyword>
			<keyword>from</keyword>
				<local>i</local> <symbol>:=</symbol> <number>1</number>
				<local>trace</local><dot>.</dot><feature><include>False</include>start</feature>
			<keyword>until</keyword>
				<local>trace</local><dot>.</dot><feature><include>False</include>after</feature>
			<keyword>loop</keyword>
				<feature><location>../tracker/etf_main_window_imp.xml#f_history</location>history</feature><dot>.</dot><feature><location>../interface/ev_text_component.xml#f_append_text</location>append_text</feature><symbol> </symbol><symbol>(</symbol><local>trace</local><dot>.</dot><feature><include>False</include>item</feature><symbol>)</symbol>
				<keyword>if</keyword> <local>i</local> <symbol>&lt;</symbol> <local>trace</local><dot>.</dot><feature><include>False</include>count</feature> <keyword>then</keyword>
					<feature><location>../tracker/etf_main_window_imp.xml#f_history</location>history</feature><dot>.</dot><feature><location>../interface/ev_text_component.xml#f_append_text</location>append_text</feature><symbol> </symbol><symbol>(</symbol>&quot;%N&quot;<symbol>)</symbol>
				<keyword>end</keyword>
				<local>trace</local><dot>.</dot><feature><include>False</include>forth</feature>
				<local>i</local> <symbol>:=</symbol> <local>i</local> <symbol>+</symbol> <number>1</number>
			<keyword>end</keyword>
		<keyword>end</keyword>
	
<keyword>feature</keyword> <symbol>{</symbol>NONE<symbol>}</symbol> <comment>--</comment><comment> Implementation</comment>

	<anchor>f_command_return_key_pressed</anchor><feature><location>../tracker/etf_main_window.xml#f_command_return_key_pressed</location>command_return_key_pressed</feature>
			<comment>--</comment><comment> Hit the return key to execute the typed command.</comment>
		<keyword>do</keyword>
			<feature><location>../tracker/etf_main_window.xml#f_execute_pressed</location>execute_pressed</feature>
		<keyword>end</keyword>

	<anchor>f_execute_pressed</anchor><feature><location>../tracker/etf_main_window.xml#f_execute_pressed</location>execute_pressed</feature>
			<comment>--</comment><comment> Called by </comment><quoted>select_actions</quoted><comment> of </comment><feature><location>../tracker/etf_main_window_imp.xml#f_execute</location>execute</feature><comment>.</comment>
		<keyword>local</keyword>
			<local>cmd</local><symbol>:</symbol> <class><include>False</include>STRING_8</class>
		<keyword>do</keyword>
			<local>cmd</local> <symbol>:=</symbol> <feature><location>../tracker/etf_main_window_imp.xml#f_command</location>command</feature><dot>.</dot><feature><location>../interface/ev_textable.xml#f_text</location>text</feature><dot>.</dot><feature><include>False</include>as_string_8</feature>
			<feature><location>../tracker/etf_main_window.xml#f_execute_command</location>execute_command</feature><symbol> </symbol><symbol>(</symbol><local>cmd</local><symbol>)</symbol>
			<keyword>if</keyword> <keyword>not</keyword> <feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_error</location>error</feature> <keyword>then</keyword>
				<keyword>if</keyword> <feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_history</location>history</feature><dot>.</dot><feature><include>False</include>count</feature> <symbol>=</symbol> <number>1</number> <keyword>then</keyword>
					<feature><location>../tracker/etf_main_window.xml#f_session_file</location>session_file</feature><dot>.</dot><feature><include>False</include>wipe_out</feature>
				<keyword>end</keyword>
				<feature><location>../tracker/etf_main_window.xml#f_session_file</location>session_file</feature><dot>.</dot><feature><include>False</include>open_append</feature>
				<feature><location>../tracker/etf_main_window.xml#f_session_file</location>session_file</feature><dot>.</dot><feature><include>False</include>put_string</feature><symbol> </symbol><symbol>(</symbol><local>cmd</local> <symbol>+</symbol> &quot;%N&quot;<symbol>)</symbol>
				<feature><location>../tracker/etf_main_window.xml#f_session_file</location>session_file</feature><dot>.</dot><feature><include>False</include>close</feature>
			<keyword>end</keyword>
		<keyword>end</keyword>

	<anchor>f_reset_pressed</anchor><feature><location>../tracker/etf_main_window.xml#f_reset_pressed</location>reset_pressed</feature>
			<comment>--</comment><comment> Reset the history.</comment>
			<comment>--</comment><comment> Two consecutive clicks of 'reset' will also</comment>
			<comment>--</comment><comment> wipe out the session file.</comment>
		<keyword>do</keyword>
			<feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_reset</location>reset</feature>
			<feature><location>../tracker/etf_main_window.xml#f_clear_display</location>clear_display</feature>
		<keyword>end</keyword>

	<anchor>f_load_pressed</anchor><feature><location>../tracker/etf_main_window.xml#f_load_pressed</location>load_pressed</feature>
			<comment>--</comment><comment> Load the session file if it exists.</comment>
		<keyword>local</keyword>
			<local>fu</local><symbol>:</symbol> <class><include>False</include>ETF_FILE_UTILITY</class>
		<keyword>do</keyword>
			<keyword>create</keyword> <local>fu</local><dot>.</dot><feature><include>False</include>read_text_from</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_main_window.xml#f_session_file_path</location>Session_file_path</feature><symbol>)</symbol>
			<keyword>if</keyword> <local>fu</local><dot>.</dot><feature><include>False</include>error</feature> <keyword>then</keyword>
				<feature><location>../tracker/etf_main_window.xml#f_clear_display</location>clear_display</feature>
				<feature><location>../tracker/etf_main_window_imp.xml#f_status</location>status</feature><dot>.</dot><feature><location>../interface/ev_text_component.xml#f_insert_text</location>insert_text</feature><symbol> </symbol><symbol>(</symbol><local>fu</local><dot>.</dot><feature><include>False</include>error_string</feature><symbol>)</symbol>
			<keyword>else</keyword>
				<keyword>if</keyword> <keyword>not</keyword> <feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_history</location>history</feature><dot>.</dot><feature><include>False</include>is_empty</feature> <keyword>then</keyword>
					<feature><location>../tracker/etf_main_window.xml#f_reset_pressed</location>reset_pressed</feature>
				<keyword>end</keyword>
				<local>fu</local><dot>.</dot><feature><include>False</include>remove_comment_lines</feature>
				<keyword>across</keyword>
					<local>fu</local><dot>.</dot><feature><include>False</include>items</feature> <keyword>as</keyword> cmd
				<keyword>loop</keyword>
					<feature><location>../tracker/etf_main_window.xml#f_execute_command</location>execute_command</feature><symbol> </symbol><symbol>(</symbol><local>cmd</local><dot>.</dot><feature><include>False</include>item</feature><symbol>)</symbol>
				<keyword>end</keyword>
			<keyword>end</keyword>
		<keyword>end</keyword>
	
<keyword>feature</keyword> <symbol>{</symbol>NONE<symbol>}</symbol> 

	<anchor>f_execute_command</anchor><feature><location>../tracker/etf_main_window.xml#f_execute_command</location>execute_command</feature> <symbol>(</symbol><local>cmd</local><symbol>:</symbol> <class><include>False</include>STRING_8</class><symbol>)</symbol>
			<comment>--</comment><comment> Execute 'cmd' and</comment>
			<comment>--</comment><comment> print off stack trace if there's any contract violation.</comment>
		<keyword>local</keyword>
			<local>problem</local><symbol>:</symbol> <class><include>False</include>STRING_8</class>
			<local>error</local><symbol>:</symbol> <class><include>False</include>BOOLEAN</class>
		<keyword>do</keyword>
			<keyword>create</keyword> <local>problem</local><dot>.</dot><feature><include>False</include>make_empty</feature>
			<keyword>if</keyword> <keyword>not</keyword> <local>error</local> <keyword>then</keyword>
				<feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_execute_cmd</location>execute_cmd</feature><symbol> </symbol><symbol>(</symbol><local>cmd</local><symbol>)</symbol>
				<feature><location>../tracker/etf_main_window.xml#f_clear_display</location>clear_display</feature>
				<feature><location>../tracker/etf_main_window.xml#f_display_history</location>display_history</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_history</location>history</feature><symbol>)</symbol>
				<feature><location>../tracker/etf_main_window_imp.xml#f_status</location>status</feature><dot>.</dot><feature><location>../interface/ev_text_component.xml#f_insert_text</location>insert_text</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_status_message</location>status_message</feature><symbol>)</symbol>
				<feature><location>../tracker/etf_main_window_imp.xml#f_output</location>output</feature><dot>.</dot><feature><location>../interface/ev_text_component.xml#f_insert_text</location>insert_text</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_output_message</location>output_message</feature><symbol>)</symbol>
				<keyword>if</keyword> <feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_error</location>error</feature> <keyword>then</keyword>
					<feature><location>../tracker/etf_main_window_imp.xml#f_command</location>command</feature><dot>.</dot><feature><location>../interface/ev_textable.xml#f_set_text</location>set_text</feature><symbol> </symbol><symbol>(</symbol><local>cmd</local><symbol>)</symbol>
				<keyword>end</keyword>
			<keyword>else</keyword>
				<local>problem</local><dot>.</dot><feature><include>False</include>append</feature><symbol> </symbol><symbol>(</symbol>&quot;%NThere was a problem:%N&quot;<symbol>)</symbol>
				<keyword>if</keyword> <keyword>attached</keyword> <feature><include>False</include>meaning</feature><symbol> </symbol><symbol>(</symbol><feature><include>False</include>exception</feature><symbol>)</symbol> <keyword>as</keyword> s <keyword>then</keyword>
					<local>problem</local><dot>.</dot><feature><include>False</include>append</feature><symbol> </symbol><symbol>(</symbol>&quot;  &quot; <symbol>+</symbol> <local>s</local> <symbol>+</symbol> &quot;%N&quot;<symbol>)</symbol>
				<keyword>end</keyword>
				<keyword>if</keyword> <keyword>attached</keyword> <feature><include>False</include>tag_name</feature> <keyword>as</keyword> s <keyword>then</keyword>
					<local>problem</local><dot>.</dot><feature><include>False</include>append</feature><symbol> </symbol><symbol>(</symbol>&quot;  Tag: &quot; <symbol>+</symbol> <local>s</local> <symbol>+</symbol> &quot;%N&quot;<symbol>)</symbol>
				<keyword>end</keyword>
				<keyword>if</keyword> <keyword>attached</keyword> <feature><include>False</include>exception_trace</feature> <keyword>as</keyword> s <keyword>then</keyword>
					<local>problem</local><dot>.</dot><feature><include>False</include>append</feature><symbol> </symbol><symbol>(</symbol>&quot;%NHere is the stack trace%N&quot;<symbol>)</symbol>
					<local>problem</local><dot>.</dot><feature><include>False</include>append</feature><symbol> </symbol><symbol>(</symbol><local>s</local><symbol>)</symbol>
					<local>problem</local><dot>.</dot><feature><include>False</include>append</feature><symbol> </symbol><symbol>(</symbol>&quot;%NEnd of stack trace...%N&quot;<symbol>)</symbol>
				<keyword>end</keyword>
				<feature><location>../tracker/etf_main_window.xml#f_clear_display</location>clear_display</feature>
				<feature><location>../tracker/etf_main_window.xml#f_display_history</location>display_history</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_history</location>history</feature><symbol>)</symbol>
				<feature><location>../tracker/etf_main_window_imp.xml#f_status</location>status</feature><dot>.</dot><feature><location>../interface/ev_text_component.xml#f_insert_text</location>insert_text</feature><symbol> </symbol><symbol>(</symbol><local>problem</local><symbol>)</symbol>
				<feature><location>../tracker/etf_main_window_imp.xml#f_output</location>output</feature><dot>.</dot><feature><location>../interface/ev_text_component.xml#f_insert_text</location>insert_text</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_main_window.xml#f_business_obj</location>business_obj</feature><dot>.</dot><feature><location>../tracker/etf_model_facade.xml#f_output_message</location>output_message</feature><symbol>)</symbol>
			<keyword>end</keyword>
		<keyword>rescue</keyword>
			<local>error</local> <symbol>:=</symbol> <keyword>True</keyword>
			<keyword>retry</keyword>
		<keyword>end</keyword>
	
<keyword>end</keyword> <comment>--</comment> <comment>class </comment><class><location>../tracker/etf_main_window.xml</location>ETF_MAIN_WINDOW</class></system>

