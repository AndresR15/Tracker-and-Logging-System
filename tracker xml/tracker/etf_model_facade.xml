<system>
<keyword>note</keyword>
	<indexing_tag>description</indexing_tag><symbol>:</symbol> <string>&quot;A facade class for easy manipulation of the business objects.&quot;</string>
	<indexing_tag>author</indexing_tag><symbol>:</symbol> <string>&quot;Jackie Wang&quot;</string>
	<indexing_tag>date</indexing_tag><symbol>:</symbol> <string>&quot;$Date$&quot;</string>
	<indexing_tag>revision</indexing_tag><symbol>:</symbol> <string>&quot;$Revision$&quot;</string>

<keyword>class</keyword> 
	<class><location>../tracker/etf_model_facade.xml</location>ETF_MODEL_FACADE</class>

<keyword>create</keyword> 
	<feature><location>../tracker/etf_model_facade.xml#f_make</location>make</feature>

<keyword>feature</keyword> <comment>--</comment><comment> Queries</comment>

	<anchor>f_model</anchor><feature><location>../tracker/etf_model_facade.xml#f_model</location>model</feature><symbol>:</symbol> <class><location>../tracker/tracker.xml</location>TRACKER</class>

	<anchor>f_error</anchor><feature><location>../tracker/etf_model_facade.xml#f_error</location>error</feature><symbol>:</symbol> <class><include>False</include>BOOLEAN</class>

	<anchor>f_status_message</anchor><feature><location>../tracker/etf_model_facade.xml#f_status_message</location>status_message</feature><symbol>:</symbol> <class><include>False</include>STRING_8</class>

	<anchor>f_output_message</anchor><feature><location>../tracker/etf_model_facade.xml#f_output_message</location>output_message</feature><symbol>:</symbol> <class><include>False</include>STRING_8</class>

	<anchor>f_history</anchor><feature><location>../tracker/etf_model_facade.xml#f_history</location>history</feature><symbol>:</symbol> <class><include>False</include>LIST</class> <symbol>[</symbol><class><include>False</include>STRING_8</class><symbol>]</symbol>
			<comment>--</comment><comment> Return the trace of events executed so far.</comment>
	
<keyword>feature</keyword> <symbol>{</symbol>NONE<symbol>}</symbol> <comment>--</comment><comment> Implementation</comment>

	<anchor>f_sys</anchor><feature><location>../tracker/etf_model_facade.xml#f_sys</location>sys</feature><symbol>:</symbol> <class><include>False</include>ETF_SOFTWARE_OPERATION</class>

	<anchor>f_input</anchor><feature><location>../tracker/etf_model_facade.xml#f_input</location>input</feature><symbol>:</symbol> <class><include>False</include>ETF_INPUT_HANDLER</class>

	<anchor>f_output</anchor><feature><location>../tracker/etf_model_facade.xml#f_output</location>output</feature><symbol>:</symbol> <class><location>../tracker/etf_gui_output_handler.xml</location>ETF_GUI_OUTPUT_HANDLER</class>

	<anchor>f_ui</anchor><feature><location>../tracker/etf_model_facade.xml#f_ui</location>ui</feature><symbol>:</symbol> <class><include>False</include>ETF_ABSTRACT_UI</class>
	
<keyword>feature</keyword> <comment>--</comment><comment> Constructor</comment>

	<anchor>f_make</anchor><feature><location>../tracker/etf_model_facade.xml#f_make</location>make</feature>
			<comment>--</comment><comment> Initialize.</comment>
		<keyword>local</keyword>
			<local>model_access</local><symbol>:</symbol> <class><location>../tracker/tracker_access.xml</location>TRACKER_ACCESS</class>
		<keyword>do</keyword>
			<feature><location>../tracker/etf_model_facade.xml#f_model</location>model</feature> <symbol>:=</symbol> <local>model_access</local><dot>.</dot><feature><location>../tracker/tracker_access.xml#f_m</location>M</feature>
			<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_sys</location>sys</feature><dot>.</dot><feature><include>False</include>make</feature>
			<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_ui</location>ui</feature><dot>.</dot><feature><include>False</include>make</feature>
			<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_input</location>input</feature><dot>.</dot><feature><include>False</include>make_without_running</feature><symbol> </symbol><symbol>(</symbol>&quot;dummy&quot;<symbol>,</symbol> <feature><location>../tracker/etf_model_facade.xml#f_ui</location>ui</feature><symbol>)</symbol>
			<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_output</location>output</feature><dot>.</dot><feature><location>../tracker/etf_gui_output_handler.xml#f_make</location>make</feature>
			<feature><location>../tracker/etf_model_facade.xml#f_output</location>output</feature><dot>.</dot><feature><location>../tracker/etf_gui_output_handler.xml#f_model</location>model</feature><dot>.</dot><feature><location>../tracker/tracker.xml#f_reset</location>reset</feature>
			<feature><location>../tracker/etf_model_facade.xml#f_input</location>input</feature><dot>.</dot><feature><include>False</include>on_error</feature><dot>.</dot><feature><include>False</include>attach</feature><symbol> </symbol><symbol>(</symbol><keyword>agent</keyword> <feature><location>../tracker/etf_model_facade.xml#f_output</location>output</feature><dot>.</dot><feature><include>False</include>log_error</feature><symbol>)</symbol>
			<keyword>create</keyword> <symbol>{</symbol><class><include>False</include>LINKED_LIST</class> <symbol>[</symbol><class><include>False</include>STRING_8</class><symbol>]</symbol><symbol>}</symbol> <feature><location>../tracker/etf_model_facade.xml#f_history</location>history</feature><dot>.</dot><feature><include>False</include>make</feature>
			<feature><location>../tracker/etf_model_facade.xml#f_error</location>error</feature> <symbol>:=</symbol> <keyword>False</keyword>
			<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_status_message</location>status_message</feature><dot>.</dot><feature><include>False</include>make_from_string</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_model_facade.xml#f_man_page</location>Man_page</feature><symbol>)</symbol>
			<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_output_message</location>output_message</feature><dot>.</dot><feature><include>False</include>make_empty</feature>
		<keyword>end</keyword>

	<anchor>f_execute_cmd</anchor><feature><location>../tracker/etf_model_facade.xml#f_execute_cmd</location>execute_cmd</feature> <symbol>(</symbol><local>cmd</local><symbol>:</symbol> <class><include>False</include>STRING_8</class><symbol>)</symbol>
			<comment>--</comment><comment> Execute 'cmd'.</comment>
			<comment>--</comment><comment> Set 'error_message' or 'output_message', but not both.</comment>
		<keyword>do</keyword>
			<keyword>if</keyword> <local>cmd</local> <symbol>~</symbol> &quot;man&quot; <keyword>then</keyword>
				<feature><location>../tracker/etf_model_facade.xml#f_error</location>error</feature> <symbol>:=</symbol> <keyword>False</keyword>
				<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_status_message</location>status_message</feature><dot>.</dot><feature><include>False</include>make_from_string</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_model_facade.xml#f_man_page</location>Man_page</feature><symbol>)</symbol>
				<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_output_message</location>output_message</feature><dot>.</dot><feature><include>False</include>make_empty</feature>
			<keyword>else</keyword>
				<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_input</location>input</feature><dot>.</dot><feature><include>False</include>make_without_running</feature><symbol> </symbol><symbol>(</symbol><local>cmd</local><symbol>,</symbol> <feature><location>../tracker/etf_model_facade.xml#f_ui</location>ui</feature><symbol>)</symbol>
				<feature><location>../tracker/etf_model_facade.xml#f_input</location>input</feature><dot>.</dot><feature><include>False</include>on_error</feature><dot>.</dot><feature><include>False</include>attach</feature><symbol> </symbol><symbol>(</symbol><keyword>agent</keyword> <feature><location>../tracker/etf_model_facade.xml#f_output</location>output</feature><dot>.</dot><feature><include>False</include>log_error</feature><symbol>)</symbol>
				<feature><location>../tracker/etf_model_facade.xml#f_input</location>input</feature><dot>.</dot><feature><include>False</include>parse_and_validate_input_string</feature>
				<keyword>if</keyword> <feature><location>../tracker/etf_model_facade.xml#f_input</location>input</feature><dot>.</dot><feature><include>False</include>etf_error</feature> <keyword>then</keyword>
					<feature><location>../tracker/etf_model_facade.xml#f_error</location>error</feature> <symbol>:=</symbol> <keyword>True</keyword>
					<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_status_message</location>status_message</feature><dot>.</dot><feature><include>False</include>make_from_string</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_model_facade.xml#f_output</location>output</feature><dot>.</dot><feature><include>False</include>error_message</feature><symbol>)</symbol>
					<feature><location>../tracker/etf_model_facade.xml#f_status_message</location>status_message</feature><dot>.</dot><feature><include>False</include>prepend</feature><symbol> </symbol><symbol>(</symbol>&quot;Command entered: &quot; <symbol>+</symbol> <local>cmd</local> <symbol>+</symbol> &quot;%N&quot;<symbol>)</symbol>
				<keyword>else</keyword>
					<feature><location>../tracker/etf_model_facade.xml#f_history</location>history</feature><dot>.</dot><feature><include>False</include>extend</feature><symbol> </symbol><symbol>(</symbol><local>cmd</local><symbol>)</symbol>
					<feature><location>../tracker/etf_model_facade.xml#f_sys</location>sys</feature><dot>.</dot><feature><include>False</include>execute_without_log</feature><symbol> </symbol><symbol>(</symbol><local>cmd</local><symbol>)</symbol>
					<feature><location>../tracker/etf_model_facade.xml#f_error</location>error</feature> <symbol>:=</symbol> <keyword>False</keyword>
					<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_status_message</location>status_message</feature><dot>.</dot><feature><include>False</include>make_empty</feature>
					<keyword>create</keyword> <feature><location>../tracker/etf_model_facade.xml#f_output_message</location>output_message</feature><dot>.</dot><feature><include>False</include>make_from_string</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/etf_model_facade.xml#f_output</location>output</feature><dot>.</dot><feature><location>../tracker/etf_gui_output_handler.xml#f_model_state</location>model_state</feature><symbol>)</symbol>
				<keyword>end</keyword>
			<keyword>end</keyword>
		<keyword>end</keyword>

	<anchor>f_reset</anchor><feature><location>../tracker/etf_model_facade.xml#f_reset</location>reset</feature>
		<keyword>do</keyword>
			<feature><location>../tracker/etf_model_facade.xml#f_make</location>make</feature>
		<keyword>end</keyword>

	<anchor>f_man_page</anchor><feature><location>../tracker/etf_model_facade.xml#f_man_page</location>Man_page</feature><symbol>:</symbol> <class><include>False</include>STRING_8</class> <symbol>=</symbol> &quot;[
		new_tracker(
		    max_phase_radiation: VALUE ; 
		    max_container_radiation: VALUE
		)
		new_phase(
		    pid: PID = STRING ; 
		    phase_name: STRING ; 
		    capacity: INTEGER_64 ; 
		    expected_materials: ARRAY[MATERIAL = {glass, metal, plastic, liquid}]
		)
		remove_phase(
		    pid: PID = STRING
		)
		new_container(
		    cid: CID = STRING ; 
		    c: CONTAINER = TUPLE[material: MATERIAL = {glass, metal, plastic, liquid}; radioactivity: VALUE] ; 
		    pid: PID = STRING
		)
		remove_container(
		    cid: CID = STRING
		)
		move_container(
		    cid: CID = STRING ; 
		    pid1: PID = STRING ; 
		    pid2: PID = STRING
		)
		undo
		redo
	]<string>&quot;</string>
	
<keyword>invariant</keyword>
	<tag>err_msg_set</tag><symbol>:</symbol> <feature><location>../tracker/etf_model_facade.xml#f_error</location>error</feature> <keyword>implies</keyword> <keyword>not</keyword> <feature><location>../tracker/etf_model_facade.xml#f_status_message</location>status_message</feature><dot>.</dot><feature><include>False</include>is_empty</feature>

<keyword>end</keyword> <comment>--</comment> <comment>class </comment><class><location>../tracker/etf_model_facade.xml</location>ETF_MODEL_FACADE</class></system>

