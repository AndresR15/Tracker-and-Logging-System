<system>
<keyword>note</keyword>
	<indexing_tag>description</indexing_tag><symbol>:</symbol> <string>&quot;Summary description for </string><symbol>{</symbol><class><location>../tracker/phase.xml</location>PHASE</class><symbol>}</symbol><string>.&quot;</string>
	<indexing_tag>author</indexing_tag><symbol>:</symbol> <string>&quot;&quot;</string>
	<indexing_tag>date</indexing_tag><symbol>:</symbol> <string>&quot;$Date$&quot;</string>
	<indexing_tag>revision</indexing_tag><symbol>:</symbol> <string>&quot;$Revision$&quot;</string>

<keyword>class</keyword> 
	<class><location>../tracker/phase.xml</location>PHASE</class>

<keyword>inherit</keyword>
	<class><include>False</include>COMPARABLE</class>
		<keyword>undefine</keyword>
			<feature><location>../tracker/phase.xml#f_out</location>out</feature>
		<keyword>redefine</keyword>
			<feature><location>../tracker/phase.xml#f_is_equal</location>is_equal</feature>
		<keyword>end</keyword>

	<class><include>False</include>ANY</class>
		<keyword>undefine</keyword>
			<feature><location>../tracker/phase.xml#f_is_equal</location>is_equal</feature>
		<keyword>redefine</keyword>
			<feature><location>../tracker/phase.xml#f_out</location>out</feature>
		<keyword>end</keyword>

<keyword>create</keyword> 
	<feature><location>../tracker/phase.xml#f_make</location>make</feature>

<keyword>feature</keyword> <symbol>{</symbol>NONE<symbol>}</symbol> <comment>--</comment><comment> Initialization</comment>

	<anchor>f_make</anchor><feature><location>../tracker/phase.xml#f_make</location>make</feature> <symbol>(</symbol><local>init_pid</local><symbol>:</symbol> <class><include>False</include>STRING_8</class><symbol>;</symbol> <local>phase_name</local><symbol>:</symbol> <class><include>False</include>STRING_8</class><symbol>;</symbol> <local>cap</local><symbol>:</symbol> <class><include>False</include>INTEGER_64</class><symbol>;</symbol> <local>expected_materials</local><symbol>:</symbol> <class><include>False</include>ARRAY</class> <symbol>[</symbol><class><include>False</include>INTEGER_64</class><symbol>]</symbol><symbol>)</symbol>
			<comment>--</comment><comment> Initialization for </comment><quoted>Current</quoted><comment>.</comment>
		<keyword>local</keyword>
			<local>c</local><symbol>:</symbol> <class><include>False</include>STRING_TABLE</class> <symbol>[</symbol><class><location>../tracker/phase_container.xml</location>PHASE_CONTAINER</class><symbol>]</symbol>
			<local>z</local><symbol>:</symbol> <class><location>../mathmodels/value.xml</location>VALUE</class>
		<keyword>do</keyword>
			<feature><location>../tracker/phase.xml#f_pid</location>pid</feature> <symbol>:=</symbol> <local>init_pid</local>
			<feature><location>../tracker/phase.xml#f_name</location>name</feature> <symbol>:=</symbol> <local>phase_name</local>
			<feature><location>../tracker/phase.xml#f_capacity</location>capacity</feature> <symbol>:=</symbol> <local>cap</local>
			<feature><location>../tracker/phase.xml#f_expected_mats</location>expected_mats</feature> <symbol>:=</symbol> <local>expected_materials</local>
			<feature><location>../tracker/phase.xml#f_materials_set</location>materials_set</feature> <symbol>:=</symbol> <feature><location>../tracker/phase.xml#f_material_array_to_set</location>material_array_to_set</feature>
			<keyword>create</keyword> <local>c</local><dot>.</dot><feature><include>False</include>make_equal_caseless</feature><symbol> </symbol><symbol>(</symbol><number>10</number><symbol>)</symbol>
			<feature><location>../tracker/phase.xml#f_containers</location>containers</feature> <symbol>:=</symbol> <local>c</local>
			<keyword>create</keyword> <local>z</local><dot>.</dot><feature><location>../mathmodels/value.xml#f_make_from_int</location>make_from_int</feature><symbol> </symbol><symbol>(</symbol><number>0</number><symbol>)</symbol>
			<feature><location>../tracker/phase.xml#f_current_rad</location>current_rad</feature> <symbol>:=</symbol> <local>z</local>
		<keyword>end</keyword>
	
<keyword>feature</keyword> <symbol>{</symbol><class><location>../tracker/phase.xml</location>PHASE</class><symbol>}</symbol> <comment>--</comment><comment> Attributes</comment>

	<anchor>f_pid</anchor><feature><location>../tracker/phase.xml#f_pid</location>pid</feature><symbol>:</symbol> <class><include>False</include>STRING_8</class>
			<comment>--</comment><comment> identifier</comment>

	<anchor>f_name</anchor><feature><location>../tracker/phase.xml#f_name</location>name</feature><symbol>:</symbol> <class><include>False</include>STRING_8</class>

	<anchor>f_capacity</anchor><feature><location>../tracker/phase.xml#f_capacity</location>capacity</feature><symbol>:</symbol> <class><include>False</include>INTEGER_64</class>
			<comment>--</comment><comment> number of containers PHASE handles</comment>

	<anchor>f_expected_mats</anchor><feature><location>../tracker/phase.xml#f_expected_mats</location>expected_mats</feature><symbol>:</symbol> <class><include>False</include>ARRAY</class> <symbol>[</symbol><class><include>False</include>INTEGER_64</class><symbol>]</symbol>
			<comment>--</comment><comment> subset of materials</comment>

	<anchor>f_materials_set</anchor><feature><location>../tracker/phase.xml#f_materials_set</location>materials_set</feature><symbol>:</symbol> <class><include>False</include>ARRAYED_SET</class> <symbol>[</symbol><class><include>False</include>INTEGER_64</class><symbol>]</symbol>
			<comment>--</comment><comment> set of materials</comment>

	<anchor>f_containers</anchor><feature><location>../tracker/phase.xml#f_containers</location>containers</feature><symbol>:</symbol> <class><include>False</include>STRING_TABLE</class> <symbol>[</symbol><class><location>../tracker/phase_container.xml</location>PHASE_CONTAINER</class><symbol>]</symbol>

	<anchor>f_current_rad</anchor><feature><location>../tracker/phase.xml#f_current_rad</location>current_rad</feature><symbol>:</symbol> <class><location>../mathmodels/value.xml</location>VALUE</class>
	
<keyword>feature</keyword> <comment>--</comment><comment> Queries</comment>

	<anchor>f_get_pid</anchor><feature><location>../tracker/phase.xml#f_get_pid</location>get_pid</feature><symbol>:</symbol> <class><include>False</include>STRING_8</class>
		<keyword>do</keyword>
			<keyword>Result</keyword> <symbol>:=</symbol> <feature><location>../tracker/phase.xml#f_pid</location>pid</feature>
		<keyword>end</keyword>

	<anchor>f_get_name</anchor><feature><location>../tracker/phase.xml#f_get_name</location>get_name</feature><symbol>:</symbol> <class><include>False</include>STRING_8</class>
		<keyword>do</keyword>
			<keyword>Result</keyword> <symbol>:=</symbol> <feature><location>../tracker/phase.xml#f_name</location>name</feature>
		<keyword>end</keyword>

	<anchor>f_get_capacity</anchor><feature><location>../tracker/phase.xml#f_get_capacity</location>get_capacity</feature><symbol>:</symbol> <class><include>False</include>INTEGER_64</class>
		<keyword>do</keyword>
			<keyword>Result</keyword> <symbol>:=</symbol> <feature><location>../tracker/phase.xml#f_capacity</location>capacity</feature>
		<keyword>end</keyword>

	<anchor>f_get_mats</anchor><feature><location>../tracker/phase.xml#f_get_mats</location>get_mats</feature><symbol>:</symbol> <class><include>False</include>ARRAY</class> <symbol>[</symbol><class><include>False</include>INTEGER_64</class><symbol>]</symbol>
		<keyword>do</keyword>
			<keyword>Result</keyword> <symbol>:=</symbol> <feature><location>../tracker/phase.xml#f_expected_mats</location>expected_mats</feature>
		<keyword>end</keyword>

	<anchor>f_get_set_mats</anchor><feature><location>../tracker/phase.xml#f_get_set_mats</location>get_set_mats</feature><symbol>:</symbol> <class><include>False</include>ARRAYED_SET</class> <symbol>[</symbol><class><include>False</include>INTEGER_64</class><symbol>]</symbol>
		<keyword>do</keyword>
			<keyword>Result</keyword> <symbol>:=</symbol> <feature><location>../tracker/phase.xml#f_materials_set</location>materials_set</feature>
		<keyword>end</keyword>

	<anchor>f_get_containers</anchor><feature><location>../tracker/phase.xml#f_get_containers</location>get_containers</feature><symbol>:</symbol> <class><include>False</include>STRING_TABLE</class> <symbol>[</symbol><class><location>../tracker/phase_container.xml</location>PHASE_CONTAINER</class><symbol>]</symbol>
		<keyword>do</keyword>
			<keyword>Result</keyword> <symbol>:=</symbol> <feature><location>../tracker/phase.xml#f_containers</location>containers</feature>
		<keyword>end</keyword>

	<anchor>f_container_exists</anchor><feature><location>../tracker/phase.xml#f_container_exists</location>container_exists</feature> <symbol>(</symbol><local>cid</local><symbol>:</symbol> <class><include>False</include>STRING_8</class><symbol>)</symbol><symbol>:</symbol> <class><include>False</include>BOOLEAN</class>
			<comment>--</comment><comment> checks whether a container exists within a phase</comment>
		<keyword>do</keyword>
			<keyword>Result</keyword> <symbol>:=</symbol> <keyword>False</keyword>
			<keyword>across</keyword>
				<feature><location>../tracker/phase.xml#f_get_containers</location>get_containers</feature> <keyword>as</keyword> c
			<keyword>loop</keyword>
				<keyword>if</keyword> <local>c</local><dot>.</dot><feature><include>False</include>item</feature><dot>.</dot><feature><location>../tracker/phase_container.xml#f_get_id</location>get_id</feature> <symbol>~</symbol> <local>cid</local> <keyword>then</keyword>
					<keyword>Result</keyword> <symbol>:=</symbol> <keyword>True</keyword>
				<keyword>end</keyword>
			<keyword>end</keyword>
		<keyword>end</keyword>

	<anchor>f_materials_out</anchor><feature><location>../tracker/phase.xml#f_materials_out</location>materials_out</feature><symbol>:</symbol> <class><include>False</include>STRING_8</class>
			<comment>--</comment><comment>outputs the expected materials array</comment>
		<keyword>local</keyword>
			<local>m</local><symbol>:</symbol> <class><location>../tracker/material.xml</location>MATERIAL</class>
		<keyword>do</keyword>
			<keyword>create</keyword> <keyword>Result</keyword><dot>.</dot><feature><include>False</include>make_from_string</feature><symbol> </symbol><symbol>(</symbol>&quot;&quot;<symbol>)</symbol>
			<keyword>across</keyword>
				<feature><location>../tracker/phase.xml#f_get_set_mats</location>get_set_mats</feature> <keyword>as</keyword> set
			<keyword>loop</keyword>
				<keyword>Result</keyword><dot>.</dot><feature><include>False</include>append</feature><symbol> </symbol><symbol>(</symbol><local>m</local><dot>.</dot><feature><location>../tracker/material.xml#f_int_to_material_string</location>int_to_material_string</feature><symbol> </symbol><symbol>(</symbol><local>set</local><dot>.</dot><feature><include>False</include>item</feature><symbol>)</symbol><symbol>)</symbol>
				<keyword>if</keyword> <symbol>(</symbol><keyword>not</keyword> <local>set</local><dot>.</dot><feature><include>False</include>is_last</feature><symbol>)</symbol> <keyword>then</keyword>
					<keyword>Result</keyword><dot>.</dot><feature><include>False</include>append_character</feature><symbol> </symbol><symbol>(</symbol><char>','</char><symbol>)</symbol>
				<keyword>end</keyword>
			<keyword>end</keyword>
		<keyword>end</keyword>
	
<keyword>feature</keyword> <comment>--</comment><comment> Commands</comment>

	<anchor>f_add_container</anchor><feature><location>../tracker/phase.xml#f_add_container</location>add_container</feature> <symbol>(</symbol><local>cont</local><symbol>:</symbol> <class><location>../tracker/phase_container.xml</location>PHASE_CONTAINER</class><symbol>)</symbol>
		<keyword>do</keyword>
			<feature><location>../tracker/phase.xml#f_get_containers</location>get_containers</feature><dot>.</dot><feature><include>False</include>extend</feature><symbol> </symbol><symbol>(</symbol><local>cont</local><symbol>,</symbol> <local>cont</local><dot>.</dot><feature><location>../tracker/phase_container.xml#f_get_id</location>get_id</feature><symbol>)</symbol>
			<feature><location>../tracker/phase.xml#f_current_rad</location>current_rad</feature> <symbol>:=</symbol> <feature><location>../tracker/phase.xml#f_current_rad</location>current_rad</feature> <symbol><location>../mathmodels/value.xml#f_plus</location>+</symbol> <local>cont</local><dot>.</dot><feature><location>../tracker/phase_container.xml#f_get_rad</location>get_rad</feature>
		<keyword>end</keyword>

	<anchor>f_remove_container</anchor><feature><location>../tracker/phase.xml#f_remove_container</location>remove_container</feature> <symbol>(</symbol><local>cid</local><symbol>:</symbol> <class><include>False</include>STRING_8</class><symbol>)</symbol>
		<keyword>require</keyword>
			<tag>container_in_phase</tag><symbol>:</symbol> <feature><location>../tracker/phase.xml#f_get_containers</location>get_containers</feature><dot>.</dot><feature><include>False</include>has_key</feature><symbol> </symbol><symbol>(</symbol><local>cid</local><symbol>)</symbol>
		<keyword>do</keyword>
			<keyword>if</keyword> <keyword>attached</keyword> <feature><location>../tracker/phase.xml#f_containers</location>containers</feature> <symbol>[</symbol><local>cid</local><symbol>]</symbol> <keyword>as</keyword> c <keyword>then</keyword>
				<feature><location>../tracker/phase.xml#f_current_rad</location>current_rad</feature> <symbol>:=</symbol> <feature><location>../tracker/phase.xml#f_current_rad</location>current_rad</feature> <symbol><location>../mathmodels/value.xml#f_minus</location>-</symbol> <local>c</local><dot>.</dot><feature><location>../tracker/phase_container.xml#f_get_rad</location>get_rad</feature>
			<keyword>end</keyword>
			<feature><location>../tracker/phase.xml#f_containers</location>containers</feature><dot>.</dot><feature><include>False</include>remove</feature><symbol> </symbol><symbol>(</symbol><local>cid</local><symbol>)</symbol>
		<keyword>ensure</keyword>
			<tag>container_removed</tag><symbol>:</symbol> <keyword>not</keyword> <feature><location>../tracker/phase.xml#f_containers</location>containers</feature><dot>.</dot><feature><include>False</include>has_key</feature><symbol> </symbol><symbol>(</symbol><local>cid</local><symbol>)</symbol>
		<keyword>end</keyword>

	<anchor>f_material_array_to_set</anchor><feature><location>../tracker/phase.xml#f_material_array_to_set</location>material_array_to_set</feature><symbol>:</symbol> <class><include>False</include>ARRAYED_SET</class> <symbol>[</symbol><class><include>False</include>INTEGER_64</class><symbol>]</symbol>
		<keyword>do</keyword>
			<keyword>create</keyword> <keyword>Result</keyword><dot>.</dot><feature><include>False</include>make</feature><symbol> </symbol><symbol>(</symbol><number>4</number><symbol>)</symbol>
			<keyword>across</keyword>
				<feature><location>../tracker/phase.xml#f_expected_mats</location>expected_mats</feature> <keyword>as</keyword> cursor
			<keyword>loop</keyword>
				<keyword>Result</keyword><dot>.</dot><feature><include>False</include>extend</feature><symbol> </symbol><symbol>(</symbol><local>cursor</local><dot>.</dot><feature><include>False</include>item</feature><symbol>)</symbol>
			<keyword>end</keyword>
		<keyword>end</keyword>
	
<keyword>feature</keyword> <comment>--</comment><comment> compare</comment>

	<anchor>f_is_less</anchor><feature><location>../tracker/phase.xml#f_is_less</location>is_less</feature> <keyword>alias</keyword> <symbol>&quot;</symbol><symbol><location>../tracker/phase.xml#f_is_less</location>&lt;</symbol><symbol>&quot;</symbol> <symbol>(</symbol><local>other</local><symbol>:</symbol> <class><location>../tracker/phase.xml</location>PHASE</class><symbol>)</symbol><symbol>:</symbol> <class><include>False</include>BOOLEAN</class>
			<comment>--</comment><comment> Is current object less than </comment><quoted>other</quoted><comment>?</comment>
		<keyword>require else</keyword>
			<tag>distinct_pid</tag><symbol>:</symbol> <keyword>not</keyword> <symbol>(</symbol><feature><location>../tracker/phase.xml#f_get_pid</location>get_pid</feature> <symbol>~</symbol> <local>other</local><dot>.</dot><feature><location>../tracker/phase.xml#f_get_pid</location>get_pid</feature><symbol>)</symbol>
		<keyword>do</keyword>
			<keyword>if</keyword> <keyword>Current</keyword> <symbol>=</symbol> <local>other</local> <keyword>then</keyword>
				<keyword>Result</keyword> <symbol>:=</symbol> <keyword>False</keyword>
			<keyword>elseif</keyword> <feature><location>../tracker/phase.xml#f_get_pid</location>get_pid</feature> <symbol>&lt;</symbol> <local>other</local><dot>.</dot><feature><location>../tracker/phase.xml#f_get_pid</location>get_pid</feature> <keyword>then</keyword>
				<keyword>Result</keyword> <symbol>:=</symbol> <keyword>True</keyword>
			<keyword>end</keyword>
		<keyword>end</keyword>

	<anchor>f_is_equal</anchor><feature><location>../tracker/phase.xml#f_is_equal</location>is_equal</feature> <symbol>(</symbol><local>other</local><symbol>:</symbol> <class><location>../tracker/phase.xml</location>PHASE</class><symbol>)</symbol><symbol>:</symbol> <class><include>False</include>BOOLEAN</class>
			<comment>--</comment><comment> Is </comment><quoted>other</quoted><comment> attached to an object of the same type</comment>
			<comment>--</comment><comment> as current object and identical to it?</comment>
		<keyword>do</keyword>
			<keyword>if</keyword> <keyword>Current</keyword> <symbol>=</symbol> <local>other</local> <keyword>then</keyword>
				<keyword>Result</keyword> <symbol>:=</symbol> <keyword>True</keyword>
			<keyword>else</keyword>
				<keyword>Result</keyword> <symbol>:=</symbol> <symbol>(</symbol><feature><location>../tracker/phase.xml#f_pid</location>pid</feature> <symbol>=</symbol> <local>other</local><dot>.</dot><feature><location>../tracker/phase.xml#f_pid</location>pid</feature><symbol>)</symbol> <keyword>and then</keyword> <symbol>(</symbol><feature><location>../tracker/phase.xml#f_name</location>name</feature> <symbol>~</symbol> <local>other</local><dot>.</dot><feature><location>../tracker/phase.xml#f_name</location>name</feature><symbol>)</symbol> <keyword>and then</keyword> <symbol>(</symbol><feature><location>../tracker/phase.xml#f_capacity</location>capacity</feature> <symbol>=</symbol> <local>other</local><dot>.</dot><feature><location>../tracker/phase.xml#f_capacity</location>capacity</feature><symbol>)</symbol> <keyword>and then</keyword> <symbol>(</symbol><feature><location>../tracker/phase.xml#f_expected_mats</location>expected_mats</feature> <symbol>~</symbol> <local>other</local><dot>.</dot><feature><location>../tracker/phase.xml#f_expected_mats</location>expected_mats</feature><symbol>)</symbol> <keyword>and then</keyword> <symbol>(</symbol><feature><location>../tracker/phase.xml#f_containers</location>containers</feature> <symbol>~</symbol> <local>other</local><dot>.</dot><feature><location>../tracker/phase.xml#f_containers</location>containers</feature><symbol>)</symbol>
			<keyword>end</keyword>
		<keyword>end</keyword>
	
<keyword>feature</keyword> <comment>--</comment><comment> Output</comment>

	<anchor>f_out</anchor><feature><location>../tracker/phase.xml#f_out</location>out</feature><symbol>:</symbol> <class><include>False</include>STRING_8</class>
			<comment>--</comment><comment> New string containing terse printable representation</comment>
			<comment>--</comment><comment> of current object</comment>
		<keyword>do</keyword>
			<keyword>create</keyword> <keyword>Result</keyword><dot>.</dot><feature><include>False</include>make_from_string</feature><symbol> </symbol><symbol>(</symbol>&quot;&quot;<symbol>)</symbol>
			<keyword>Result</keyword><dot>.</dot><feature><include>False</include>append</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/phase.xml#f_pid</location>pid</feature> <symbol>+</symbol> &quot;-&gt;&quot; <symbol>+</symbol> <feature><location>../tracker/phase.xml#f_name</location>name</feature> <symbol>+</symbol> &quot;:&quot; <symbol>+</symbol> <feature><location>../tracker/phase.xml#f_capacity</location>capacity</feature><dot>.</dot><feature><include>False</include>out</feature><symbol>)</symbol>
			<keyword>Result</keyword><dot>.</dot><feature><include>False</include>append_character</feature><symbol> </symbol><symbol>(</symbol><char>','</char><symbol>)</symbol>
			<keyword>Result</keyword><dot>.</dot><feature><include>False</include>append_integer</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/phase.xml#f_get_containers</location>get_containers</feature><dot>.</dot><feature><include>False</include>count</feature><symbol>)</symbol>
			<keyword>Result</keyword><dot>.</dot><feature><include>False</include>append_character</feature><symbol> </symbol><symbol>(</symbol><char>','</char><symbol>)</symbol>
			<keyword>Result</keyword><dot>.</dot><feature><include>False</include>append</feature><symbol> </symbol><symbol>(</symbol><feature><location>../tracker/phase.xml#f_current_rad</location>current_rad</feature><dot>.</dot><feature><location>../mathmodels/value.xml#f_out</location>out</feature> <symbol>+</symbol> &quot;,{&quot; <symbol>+</symbol> <feature><location>../tracker/phase.xml#f_materials_out</location>materials_out</feature> <symbol>+</symbol> &quot;}&quot;<symbol>)</symbol>
		<keyword>end</keyword>
	
<keyword>end</keyword> <comment>--</comment> <comment>class </comment><class><location>../tracker/phase.xml</location>PHASE</class></system>

